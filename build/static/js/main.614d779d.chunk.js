(this.webpackJsonpgreencity=this.webpackJsonpgreencity||[]).push([[0],{106:function(e,t){},140:function(e,t,n){},169:function(e,t){},170:function(e,t){},171:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),s=n.n(r),l=(n(140),n(5)),o=n(18),i=n(15),d=Object(a.createContext)(null),u=Object(a.createContext)(null),j=n(1);function b(e){var t=c.a.useContext(u).user;return Object(j.jsx)("div",{children:Object(j.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#e3f2fd"},children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("span",{className:"navbar-brand",children:e.title}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(j.jsxs)("ul",{className:"navbar-nav",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.c,{to:"/projects",className:"nav-link","aria-current":"page",children:"Projects"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.c,{to:"/customers",className:"nav-link",children:"Customers"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.c,{to:"/dealers",className:"nav-link",children:"Dealers"})}),Object(j.jsx)("li",{className:"nav-item",children:t?Object(j.jsx)(o.c,{to:"/logout",className:"nav-link",children:"Logout"}):Object(j.jsx)(o.c,{to:"/login",className:"nav-link",children:"Login"})})]})})]})})})}b.defaultProps={title:"Rudra Estate"};var m=n(30),p=n.n(m),O=n(37),h=n(34),x=n(7),g=n(89),f=n.n(g),v="http://localhost:8000/",y=f.a.create({timeout:3e3,headers:{Authorization:localStorage.getItem("access_token")?"Bearer "+localStorage.getItem("access_token"):null}});y.interceptors.request.use((function(e){return e.headers.Authorization=localStorage.getItem("access_token")?"Bearer "+localStorage.getItem("access_token"):null,e}),(function(e){return Promise.reject(e)})),y.interceptors.response.use((function(e){return e}),function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"undefined"!==typeof t.response){e.next=4;break}return alert("A server/network error occurred"),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||n.url!==v+"api/token/refresh/"){e.next=7;break}return window.location.href="/login",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=24;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=21;break}if(c=JSON.parse(atob(a.split(".")[1])),r=Math.ceil(Date.now()/1e3),console.log(c.exp),!(c.exp>r)){e.next=17;break}return e.abrupt("return",y.post(v+"api/token/refresh/",{refresh:a}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),y.defaults.headers.Authorization="Bearer "+e.data.access,n.headers.Authorization="Bearer "+e.data.access,y(n)})).catch((function(e){alert("Error occured while making request for refresh token"),console.log(e.request)})));case 17:console.log("Refresh token is expired",c.exp,r),window.location.href="/login";case 19:e.next=23;break;case 21:console.log("Refresh Token is not available"),window.location.href="/login";case 23:case 24:return e.abrupt("return",Promise.reject(t));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var _=f.a.create({baseURL:"http://localhost:8000/api/",timeout:3e3,headers:{Authorization:localStorage.getItem("access_token")?"Bearer "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}}),N=y,C=n(246),S=n(226),k=n(221),w=n(247),P=n(227),D=n(111),E=n.n(D),I=n(118),A=n(217),F=n(219),L=Object(A.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function z(){var e=L(),t=Object(a.useState)({username:"",password:""}),n=Object(l.a)(t,2),c=n[0],r=n[1],s=Object(a.useContext)(u).setUser,o=Object(i.f)();function d(e){r(Object(x.a)(Object(x.a)({},c),{},Object(h.a)({},e.target.name,e.target.value.trim())))}return Object(j.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(j.jsx)(k.a,{}),Object(j.jsxs)("div",{className:e.paper,children:[Object(j.jsx)(C.a,{children:Object(j.jsx)(E.a,{})}),Object(j.jsx)(I.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(j.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(j.jsx)(w.a,{variant:"standard",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:d}),Object(j.jsx)(w.a,{variant:"standard",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:d}),Object(j.jsx)(S.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),console.log(c),_.post("token/",{username:c.username,password:c.password}).then(function(){var e=Object(O.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),_.defaults.headers.Authorization="Bearer "+localStorage.getItem("access_token"),e.next=5,s(!0);case 5:o.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:e.submit,children:"Sign In"}),Object(j.jsx)(P.a,{container:!0})]})]})]})}function T(){var e=Object(i.f)(),t=Object(a.useContext)(u).setUser;return Object(a.useEffect)((function(){N.post("http://localhost:8000/api/logout/",{refresh_token:localStorage.getItem("refresh_token")}).then(function(){var n=Object(O.a)(p.a.mark((function n(a){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Successfully Logged Out",a),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),N.defaults.headers.Authorization=null,n.next=6,t(null);case 6:e.push("/");case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(e.response),alert(e)}))})),Object(j.jsx)(j.Fragment,{children:"Logout"})}function B(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,s=Object(a.useState)(""),o=Object(l.a)(s,2),i=o[0],d=o[1],u=Object(a.useState)(""),b=Object(l.a)(u,2),m=b[0],p=b[1],O=Object(a.useState)(""),h=Object(l.a)(O,2),x=h[0],g=h[1],f=Object(a.useState)(""),v=Object(l.a)(f,2),y=v[0],_=v[1];Object(a.useEffect)((function(){d(t.name),p(t.address),g(t.total_plots),_(t.total_area)}),[t]);var N=function(e){if(i){var a={name:i,address:m,total_plots:x,total_area:y};r(t.id,n,a).then((function(e){e&&(d(""),p(""),g(""),_(""),c(!1))}))}else alert("Enter Project Name")},C=function(e){"Enter"===e.key&&N()};return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:i,onChange:function(e){d(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:m,onChange:function(e){p(e.target.value)},placeholder:"Address"})}),Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:x,onChange:function(e){g(e.target.value)},placeholder:"No. of Plots"})}),Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:y,onChange:function(e){_(e.target.value)},placeholder:"Total Area"})}),Object(j.jsx)("td",{className:"text-center",style:{paddingLeft:"10px"},children:Object(j.jsx)("button",{onClick:N,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){c(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})}),Object(j.jsx)("td",{}),Object(j.jsx)("td",{})]})}function R(e){var t=e.title,n=e.obj,c=e.index,r=e.setEditingView,s=e.updateItem,o=Object(a.useState)(""),i=Object(l.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(""),m=Object(l.a)(b,2),p=m[0],O=m[1],h=Object(a.useState)(""),x=Object(l.a)(h,2),g=x[0],f=x[1];Object(a.useEffect)((function(){u(n.name),null==n.contact_no?O(""):O(n.contact_no),f(n.other_info)}),[n]);var v=function(e){if(d){var a={name:d,contact_no:p,other_info:g};p||(a.contact_no=null),s(n.id,c,a).then((function(e){e&&(u(""),O(""),f(""),r(!1))}))}else alert("Enter "+t.substring(0,t.length-1)+" Name")};function y(e){"Enter"===e.key&&v()}return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{onKeyPress:y,children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:d,onChange:function(e){u(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("td",{onKeyPress:y,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:p,onChange:function(e){O(e.target.value)},placeholder:"Contact No"})}),Object(j.jsx)("td",{onKeyPress:y,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:g,onChange:function(e){f(e.target.value)},placeholder:"Other Info"})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:v,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){r(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})}function q(e){var t=e.title,n=e.obj,c=e.index,r=e.updateItem,s=e.deleteItem,o=Object(i.f)(),d=Object(a.useState)(!1),u=Object(l.a)(d,2),b=u[0],m=u[1];return!0===b?Object(j.jsx)(j.Fragment,{children:"Projects"===t?Object(j.jsx)(B,{title:t,obj:n,index:c,updateItem:r,setEditingView:m}):Object(j.jsx)(R,{title:t,obj:n,index:c,updateItem:r,setEditingView:m})}):Object(j.jsx)(j.Fragment,{children:function(){var e=Object.keys(n);function a(){o.push("/".concat(t.toLowerCase(),"/").concat(n.id))}return e.shift(),e.shift(),"plots"!==e[e.length-1]&&"deal"!==e[e.length-1]||e.pop(),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"row",style:{cursor:"pointer"},onClick:a,children:n.name}),e.map((function(e){return Object(j.jsxs)("td",{style:{cursor:"pointer"},onClick:a,children:[" ",n[e]," "]},e)})),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){return m(!0)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"})}),Object(j.jsx)("td",{children:"Projects"===t?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)("button",{onClick:function(){return s(c,n)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})})]})}()})}var V=n(20),W=n(236),K=n(237),U=n(230),Y=n(235),M=n(244),G=n(229),H=n(225),J=n(243),Q=n(231),X=n(232),Z=n(76),$=n.n(Z),ee=n(115),te=n.n(ee),ne=n(228),ae=n(250),ce=[{id:"actions",numeric:!0,disablePadding:!0,label:"Actions",align:"left"},{id:"plot_no",numeric:!0,disablePadding:!0,label:"PlotNo",align:"left"},{id:"area",numeric:!0,disablePadding:!0,label:"Area",align:"left"},{id:"rate",numeric:!0,disablePadding:!0,label:"Rate",align:"left"},{id:"plc",numeric:!0,disablePadding:!0,label:"PLC",align:"left"},{id:"amount",numeric:!0,disablePadding:!0,label:"Amount",align:"left"},{id:"dealer_name",numeric:!1,disablePadding:!1,label:"Dealer",align:"center"},{id:"customer_name",numeric:!1,disablePadding:!1,label:"Customer",align:"center"},{id:"total_commission_paid",numeric:!0,disablePadding:!0,label:"Commission",align:"center"},{id:"balance",numeric:!0,disablePadding:!1,label:"Balance",align:"left"},{id:"next_due_date",numeric:!0,disablePadding:!1,label:"Next Due Date",align:"left"},{id:"next_payable_amount",numeric:!0,disablePadding:!1,label:"Payable Amount",align:"left"}];function re(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,c=e.orderBy,r=e.numSelected,s=e.rowCount,l=e.onRequestSort;return Object(j.jsx)(ne.a,{children:Object(j.jsxs)(G.a,{children:[Object(j.jsx)(U.a,{padding:"checkbox",children:Object(j.jsx)(J.a,{indeterminate:r>0&&r<s,checked:s>0&&r===s,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),ce.map((function(e){return Object(j.jsx)(U.a,{align:e.align,padding:"none",style:{fontWeight:"bold"},sortDirection:c===e.id&&a,children:Object(j.jsxs)(ae.a,{active:c===e.id,direction:c===e.id?a:"asc",onClick:(n=e.id,function(e){l(e,n)}),children:[e.label,c===e.id?Object(j.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var se=n(63),le=n.n(se),oe=n(4),ie=n(10),de=n(233),ue=n(175),je=n(234),be=n(114),me=n.n(be),pe=n(113),Oe=n.n(pe),he=n(224),xe=n(249),ge=n(240),fe=n(251),ve=Object(A.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}}));function ye(e){var t=e.plots,n=(e.rows,e.setRows),c=ve(),r=Object(a.useState)(""),s=Object(l.a)(r,2),o=s[0],i=s[1],u=Object(a.useState)("dealer_name"),b=Object(l.a)(u,2),m=b[0],p=b[1],O=o.toLowerCase(),h=Object(a.useContext)(d),g=h.filters,f=h.setFilters;return Object(a.useEffect)((function(){var e=Object(V.a)(t);e.forEach((function(e){e.plot_no=Number(e.plot_no),e.deal?(e.balance=e.deal.balance,e.dealer_name=e.deal.dealer.name,e.customer_name=e.deal.customer.name,e.total_commission_paid=e.deal.total_commission_paid,e.deal.unpaid_dues.length?(e.next_due_date=e.deal.unpaid_dues[0].due_date,e.next_due_date=new Date(e.deal.unpaid_dues[0].due_date),e.next_payable_amount=e.deal.unpaid_dues[0].payable_amount):(e.next_due_date=null,e.next_payable_amount=null)):(e.balance=null,e.dealer_name=null,e.customer_name=null,e.total_commission_paid=null)})),n(e)}),[t,n]),Object(a.useEffect)((function(){var e=[];g.sold&&(e=g.pending?Object(V.a)(t).filter((function(e){return e.deal&&e.deal.penalty})):Object(V.a)(t).filter((function(e){return e.deal}))),g.unsold&&!g.pending&&(e=[].concat(Object(V.a)(e),Object(V.a)(Object(V.a)(t).filter((function(e){return!e.deal}))))),g.apply_dates&&(e=e.filter((function(e){return e.deal&&e.deal.unpaid_dues.find((function(e){var t=new Date(e.due_date).getTime();return new Date(g.start_date).getTime()<=t&&t<=new Date(g.end_date).getTime()}))}))),O&&(e=e.filter((function(e){return"".concat(e[m])&&"".concat(e[m]).toLowerCase().includes(O)}))),n(e)}),[t,O,m,n,g.sold,g.unsold,g.pending,g.apply_dates,g.start_date,g.end_date]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(he.a,{className:c.formControl,children:[Object(j.jsx)(xe.a,{id:"search-column",children:"Column"}),Object(j.jsx)(ge.a,{labelId:"search-column",id:"search-column",value:m,onChange:function(e){p(e.target.value)},children:ce.filter((function(e){return"actions"!==e.id})).map((function(e){return Object(j.jsx)(fe.a,{value:e.id,children:e.label},e.id)}))})]}),Object(j.jsx)(w.a,{label:"Query",style:{margin:"0px 5px",minWidth:"120px"},value:o,onChange:function(e){i(e.target.value)}}),Object(j.jsx)(w.a,{label:"Start Date",type:"date",value:g.start_date,onChange:function(e){f(Object(x.a)(Object(x.a)({},g),{},{start_date:e.target.value,apply_dates:!1}))},InputLabelProps:{shrink:!0},style:{margin:"0px 5px",minWidth:"130px"}}),Object(j.jsx)(w.a,{label:"End Date",type:"date",value:g.end_date,onChange:function(e){f(Object(x.a)(Object(x.a)({},g),{},{end_date:e.target.value,apply_dates:!1}))},InputLabelProps:{shrink:!0},style:{margin:"0px 5px",minWidth:"130px"}}),Object(j.jsx)(Q.a,{value:"apply-dates",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.apply_dates,onChange:function(){f(Object(x.a)(Object(x.a)({},g),{},{apply_dates:!g.apply_dates}))}}),label:"ApplyDates",labelPlacement:"top"}),Object(j.jsx)(Q.a,{value:"Sold",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.sold,onChange:function(){f(Object(x.a)(Object(x.a)({},g),{},{sold:!g.sold}))}}),label:"Sold",labelPlacement:"top"}),Object(j.jsx)(Q.a,{value:"Unsold",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.unsold,onChange:function(){f(Object(x.a)(Object(x.a)({},g),{},{unsold:!g.unsold}))}}),label:"Unsold",labelPlacement:"top"}),Object(j.jsx)(Q.a,{value:"Pending",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.pending,onChange:function(){f(Object(x.a)(Object(x.a)({},g),{},{pending:!g.pending}))}}),label:"Pending",labelPlacement:"top"})]})}var _e=Object(A.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ie.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}}));function Ne(e){var t=_e(),n=c.a.useState(!1),a=Object(l.a)(n,2),r=a[0],s=a[1],o=e.numSelected,i=e.plots,d=e.rows,u=e.setRows,b=e.setCurrentlyCreating,m=e.deleteMultipleItems,p=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(I.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:["Are you sure you want to delete these ",o," plots?"]}),Object(j.jsx)(S.a,{onClick:m,children:" Yes "}),Object(j.jsx)(S.a,{onClick:function(){s(!1)},children:"No"})]})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(de.a,{className:Object(oe.a)(t.root,Object(h.a)({},t.highlight,o>0)),children:o>0?Object(j.jsx)(j.Fragment,{children:r?Object(j.jsx)(p,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(I.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[o," selected"]}),Object(j.jsx)(je.a,{title:"Delete",children:Object(j.jsx)(ue.a,{"aria-label":"delete",onClick:function(){s(!0)},children:Object(j.jsx)($.a,{})})})]})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(I.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Plots"}),Object(j.jsx)(je.a,{title:"Export",children:Object(j.jsx)(ue.a,{"aria-label":"export",onClick:function(){!function(e){var t=e.map((function(e){return{PlotNo:e.plot_no,Area:e.area,Rate:e.rate,PLC:e.plc,Amount:e.amount,Dealer:e.dealer_name,Customer:e.deal?e.deal.customer.name:"",Commission:e.deal?e.deal.total_commission_paid:"",Balance:e.deal?e.deal.balance:"","Next Due Date":e.deal&&e.deal.unpaid_dues.length?e.deal.unpaid_dues[0].due_date:"","Payable Amount":e.deal&&e.deal.unpaid_dues.length?e.deal.unpaid_dues[0].payable_amount:"",Penalty:e.deal?e.deal.penalty:""}})),n=le.a.utils.json_to_sheet(t),a=le.a.utils.book_new();le.a.utils.book_append_sheet(a,n,"PRoject_Name - PLOTS"),le.a.writeFile(a,"plots.xlsx")}(d)},children:Object(j.jsx)(Oe.a,{})})}),Object(j.jsx)(je.a,{title:"Add Plot",children:Object(j.jsx)(ue.a,{"aria-label":"add plot",onClick:function(){b(!0)},children:Object(j.jsx)(me.a,{})})})]})}),Object(j.jsxs)(de.a,{className:Object(oe.a)(t.root,Object(h.a)({},t.highlight,o>0)),children:[Object(j.jsx)(I.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"}),Object(j.jsx)(ye,{plots:i,rows:d,setRows:u})]})]})}var Ce=n(77),Se=n.n(Ce),ke=n(78),we=n.n(ke),Pe=function(e){var t=e.obj,n=e.setDeleteIdx,a=e.deleteItem;return Object(j.jsxs)(G.a,{children:[Object(j.jsx)(U.a,{padding:"checkbox"}),Object(j.jsxs)(U.a,{padding:"none",children:[Object(j.jsx)(Se.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:function(){a(t).then((function(){n(-1)}))}}),Object(j.jsx)(we.a,{style:{cursor:"pointer"},onClick:function(){return n(-1)}})]}),Object(j.jsx)(U.a,{padding:"none",style:{padding:"9px",fontSize:"17px"},colSpan:11,children:"Are you sure you want to delete this plot?"})]})},De=function(e){var t=e.setCurrentlyCreating,n=e.saveItem,r=Object(a.useState)({plot_no:"",area:"",rate:"",plc:""}),s=Object(l.a)(r,2),o=s[0],i=s[1],d=function(e){o.plot_no?o.area?n(Object(x.a)({},o)).then((function(e){e&&(u.current.focus(),i({plot_no:"",area:"",rate:"",plc:""}))})):alert("Enter Area! If not sure enter any value"):alert("Enter Plot No")},u=c.a.useRef(null);return Object(a.useEffect)((function(){u.current&&u.current.focus()}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(G.a,{onKeyUp:function(e){"Enter"===e.key?d():"Escape"===e.key&&(console.log("escape"),t(!1))},children:[Object(j.jsx)(U.a,{padding:"checkbox"}),Object(j.jsxs)(U.a,{padding:"none",children:[Object(j.jsx)(Se.a,{onClick:d,style:{cursor:"pointer"}}),Object(j.jsx)(we.a,{onClick:function(e){t(!1)},style:{cursor:"pointer"}})]}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{inputRef:u,style:{padding:"3px 3px"},type:"text",size:"small",value:o.plot_no||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{plot_no:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.area||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{area:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.rate||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{rate:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.plc||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{plc:e.target.value}))}})})]})})};function Ee(e){var t=e.obj,n=e.setEditIdx,c=e.updateItem,r=Object(a.useState)({plot_no:"",area:"",rate:"",plc:""}),s=Object(l.a)(r,2),o=s[0],i=s[1];Object(a.useEffect)((function(){i(Object(x.a)({},t))}),[t]);var d=function(e){o.plot_no?c(Object(x.a)({},o)).then((function(e){e&&n(-1)})):alert("Enter Plot No")},u=function(e){"Enter"===e.key?d():"Escape"===e.key&&n(-1)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(U.a,{padding:"none",children:[Object(j.jsx)(Se.a,{onClick:d,style:{cursor:"pointer"}}),Object(j.jsx)(we.a,{onClick:function(e){n(-1)},style:{cursor:"pointer"}})]}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{autoFocus:!0,style:{padding:"3px 3px"},type:"text",size:"small",value:o.plot_no||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{plot_no:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.area||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{area:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.rate||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{rate:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.plc||"",onChange:function(e){i(Object(x.a)(Object(x.a)({},o),{},{plc:e.target.value}))}})})]})}function Ie(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Ae(e,t){return"desc"===e?function(e,n){return Ie(e,n,t)}:function(e,n){return-Ie(e,n,t)}}function Fe(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var Le=Object(A.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ze(e){e.title;var t=e.base_url,n=e.project_details,a=e.setProjectDetails,r=t+"plots/",s=Le(),o=Object(i.f)(),d=c.a.useState([]),u=Object(l.a)(d,2),b=u[0],m=u[1],p=c.a.useState([]),O=Object(l.a)(p,2),g=O[0],f=O[1],v=c.a.useState(!1),y=Object(l.a)(v,2),_=y[0],C=y[1],S=c.a.useState(-1),k=Object(l.a)(S,2),w=k[0],P=k[1],D=c.a.useState(-1),E=Object(l.a)(D,2),I=E[0],A=E[1],F=c.a.useState("asc"),L=Object(l.a)(F,2),z=L[0],T=L[1],B=c.a.useState("plot_no"),R=Object(l.a)(B,2),q=R[0],Z=R[1],ee=c.a.useState([]),ne=Object(l.a)(ee,2),ae=ne[0],ce=ne[1],se=c.a.useState(0),le=Object(l.a)(se,2),oe=le[0],ie=le[1],de=c.a.useState(!1),ue=Object(l.a)(de,2),je=ue[0],be=ue[1],me=c.a.useState(5),pe=Object(l.a)(me,2),Oe=pe[0],he=pe[1],xe=function(e){return N.put(r+"".concat(e.id,"/"),e).then((function(e){console.log(e.data);var t=Object(x.a)({},n);return t.plots[e.data.id]=e.data,a(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},ge=function(e){return N.delete(r+"".concat(e.id,"/")).then((function(t){var c=Object(x.a)({},n);delete c.plots[e.id],a(c),console.log("Successfully Deleted! ",t)})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))};c.a.useEffect((function(){m(Object(V.a)(Object.values(n.plots)))}),[n]),c.a.useEffect((function(){he(b.length)}),[b]);var fe=Oe-Math.min(Oe,g.length-oe*Oe),ve=function(e){o.push("/projects/".concat(e.project_id,"/plots/").concat(e.id))};return Object(j.jsxs)("div",{className:s.root,children:[Object(j.jsxs)(H.a,{className:s.paper,children:[Object(j.jsx)(Ne,{numSelected:ae.length,setCurrentlyCreating:C,deleteMultipleItems:function(){ae.forEach((function(e){ge({id:e})})),ce([])},plots:b,rows:g,setRows:f}),Object(j.jsx)(Y.a,{id:"plots-table",children:Object(j.jsxs)(W.a,{className:s.table,"aria-labelledby":"tableTitle",size:je?"small":"medium","aria-label":"enhanced table",children:[Object(j.jsx)(re,{classes:s,numSelected:ae.length,order:z,orderBy:q,onSelectAllClick:function(e){if(e.target.checked){var t=g.map((function(e){return e.id}));ce(t)}else ce([])},onRequestSort:function(e,t){T(q===t&&"asc"===z?"desc":"asc"),Z(t)},rowCount:g.length}),Object(j.jsxs)(K.a,{children:[_&&Object(j.jsx)(De,{setCurrentlyCreating:C,saveItem:function(e){return N.post(r,e).then((function(e){return console.log(e.data),a(Object(x.a)(Object(x.a)({},n),{},{plots:Object(x.a)(Object(x.a)({},n.plots),{},Object(h.a)({},e.data.id,e.data))})),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}),Fe(g,Ae(z,q)).slice(oe*Oe,oe*Oe+Oe).map((function(e,t){var n,a=(n=e.id,-1!==ae.indexOf(n)),c="enhanced-table-checkbox-".concat(t),r=e.id===w;return e.id===I?Object(j.jsx)(Pe,{obj:e,setDeleteIdx:A,deleteItem:ge},e.id):Object(j.jsxs)(G.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(j.jsx)(U.a,{padding:"checkbox",children:Object(j.jsx)(J.a,{fontSize:"small",onClick:function(t){return function(e,t){var n=ae.indexOf(t),a=[];-1===n?a=a.concat(ae,t):0===n?a=a.concat(ae.slice(1)):n===ae.length-1?a=a.concat(ae.slice(0,-1)):n>0&&(a=a.concat(ae.slice(0,n),ae.slice(n+1))),ce(a)}(0,e.id)},checked:a,inputProps:{"aria-labelledby":c}})}),r?Object(j.jsx)(Ee,{title:"Plots",obj:e,setEditIdx:P,updateItem:xe}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(U.a,{align:"left",padding:"none",children:[Object(j.jsx)(te.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:function(){P(e.id)}}),Object(j.jsx)($.a,{style:{cursor:"pointer"},fontSize:"small",onClick:function(){A(e.id)}})]}),Object(j.jsx)(U.a,{component:"th",id:c,scope:"row",padding:"none",style:{cursor:"pointer",fontWeight:"bold"},onClick:function(){return ve(e)},children:e.plot_no}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.area}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.rate}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.plc})]}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.amount}),Object(j.jsx)(U.a,{align:"center",padding:"none",style:{cursor:"pointer"},onClick:function(){var t;(t=e).deal&&o.push("/dealers/".concat(t.deal.dealer.id))},children:e.dealer_name}),Object(j.jsx)(U.a,{align:"center",padding:"none",style:{cursor:"pointer"},onClick:function(){var t;(t=e).deal&&o.push("/customers/".concat(t.deal.customer.id))},children:e.customer_name}),Object(j.jsx)(U.a,{align:"center",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.total_commission_paid}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.balance}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.next_due_date?"".concat(e.next_due_date.getDate(),"-").concat(e.next_due_date.getMonth()+1,"-").concat(e.next_due_date.getFullYear()):null}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.next_payable_amount})]},e.id)})),fe>0&&Object(j.jsx)(G.a,{style:{height:(je?33:53)*fe},children:Object(j.jsx)(U.a,{colSpan:6})})]})]})}),Object(j.jsx)(M.a,{rowsPerPageOptions:[0,5,b.length],component:"div",count:g.length,rowsPerPage:Oe,page:oe,onChangePage:function(e,t){ie(t)},onChangeRowsPerPage:function(e){he(parseInt(e.target.value,10)),ie(0)}})]}),Object(j.jsx)(Q.a,{control:Object(j.jsx)(X.a,{checked:je,onChange:function(e){be(e.target.checked)}}),label:"Dense padding"})]})}function Te(e){var t=e.base_url+"projects/"+e.match.params.project_id+"/",n=Object(a.useState)({plots:{}}),c=Object(l.a)(n,2),r=c[0],s=c[1],o=Object(a.useState)(null),i=Object(l.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(!1),m=Object(l.a)(b,2),p=m[0],O=m[1];Object(a.useEffect)((function(){N.get(t).then((function(e){O(!0),s(e.data),console.log(e.data)})).catch((function(e){O(!0),u(e),console.log(e)}))}),[t]);var h=function(e,n,a){return N.put(t,a).then((function(e){console.log(e);var t=Object(x.a)({},r);return Object.keys(e.data).forEach((function(n){t[n]=e.data[n]})),s(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},g=function(e,t){};return Object(j.jsxs)("div",{className:"my-4 px-3",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{paddingBottom:"10px"},children:Object(j.jsxs)("h1",{className:"d-inline",children:[" ",r.name," "]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"Name"}),Object(j.jsx)("th",{scope:"col",children:"Address"}),Object(j.jsx)("th",{scope:"col",children:"No. of Plots"}),Object(j.jsx)("th",{scope:"col",children:"Total Area"}),Object(j.jsx)("th",{scope:"col",children:"Plots Sold"}),Object(j.jsx)("th",{scope:"col",children:"Area Sold"}),Object(j.jsx)("th",{scope:"col",children:"Plots Left"}),Object(j.jsx)("th",{scope:"col",children:"Area Left"}),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),Object(j.jsx)("tbody",{children:d?Object(j.jsx)("tr",{children:Object(j.jsxs)("td",{children:[" Error: ",d.message," "]})}):p?Object(j.jsx)(q,{title:"Projects",obj:r,index:r.id,updateItem:h,deleteItem:g}):Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:" Loading... "})})})]})})]}),Object(j.jsx)(ze,{title:"Plots",base_url:t,project_details:r,setProjectDetails:s})]})}function Be(e){e.title;var t=e.base_url,n=e.project_id,r=e.plot_details,s=e.setPlotDetails,o=(e.index,t+"projects/".concat(n,"/plots/").concat(r.id,"/")),i=Object(a.useState)(!1),d=Object(l.a)(i,2),u=d[0],b=d[1],m=c.a.useRef(null),p=Object(a.useState)(""),O=Object(l.a)(p,2),h=O[0],g=O[1],f=Object(a.useState)(""),v=Object(l.a)(f,2),y=v[0],_=v[1],C=Object(a.useState)(""),S=Object(l.a)(C,2),k=S[0],P=S[1],D=Object(a.useState)(""),E=Object(l.a)(D,2),I=E[0],A=E[1],F=Object(a.useState)(""),L=Object(l.a)(F,2),z=L[0],T=L[1];Object(a.useEffect)((function(){g(r.plot_no),_(r.area),P(r.rate),T(r.amount),A(r.plc),u&&m.current&&m.current.focus()}),[r,u]);var B={display:"flex",alignItems:"center"};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"card col-lg-11 mx-4",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title border-bottom pb-2",children:"Plot"}),Object(j.jsx)("div",{className:"card-text",children:Object(j.jsx)("form",{children:Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-2",style:B,children:Object(j.jsx)(w.a,{inputRef:m,label:"Plot No",InputProps:{readOnly:!u},margin:"dense",size:"small",color:"primary",variant:"standard",value:h||"",onChange:function(e){return g(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-2",style:B,children:Object(j.jsx)(w.a,{label:"Area",InputProps:{readOnly:!u},margin:"dense",size:"small",color:"primary",variant:"standard",value:y||"",onChange:function(e){return _(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-2",style:B,children:Object(j.jsx)(w.a,{label:"Rate",InputProps:{readOnly:!u},margin:"dense",size:"small",color:"primary",variant:"standard",value:k||"",onChange:function(e){return P(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-2",style:B,children:Object(j.jsx)(w.a,{label:"PLC",InputProps:{readOnly:!u},margin:"dense",size:"small",color:"primary",variant:"standard",value:I||"",onChange:function(e){return A(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-2",style:B,children:Object(j.jsx)(w.a,{label:"Amount",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:z||"",onChange:function(e){return T(e.target.value)}})}),!1===u?Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),b(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-primary",children:"Edit"}),Object(j.jsx)("button",{onClick:function(){alert("Deletion Not Compatible Yet")},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})]}):Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){(e.preventDefault(),h)?function(e){return N.put(o,e).then((function(e){console.log(e);var t=Object(x.a)({},r);return Object.keys(e.data).forEach((function(n){t[n]=e.data[n]})),s(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}({plot_no:h,area:y,rate:k,plc:I}).then((function(e){e&&b(!1)})):alert("Enter Plot No")},style:{margin:"5px 5px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),b(!1)},style:{margin:"5px 5px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})})]})})})}var Re=n(241);function qe(e){e.title;var t=e.base_url,n=e.project_id,c=e.plot_details,r=e.setPlotDetails,s=e.setEditingView,o=(e.index,t+"projects/".concat(n,"/deals/")),i=t+"customers/",d=t+"dealers/",u={id:"",name:"",contact_no:""},b=Object(a.useState)(null),m=Object(l.a)(b,2),h=m[0],g=m[1],f=Object(a.useState)(null),v=Object(l.a)(f,2),y=v[0],_=v[1],C=Object(a.useState)(Object(x.a)({},u)),S=Object(l.a)(C,2),k=S[0],P=S[1],D=Object(a.useState)(Object(x.a)({},u)),E=Object(l.a)(D,2),I=E[0],A=E[1],F=Object(a.useState)([]),L=Object(l.a)(F,2),z=L[0],T=L[1],B=Object(a.useState)([]),R=Object(l.a)(B,2),q=R[0],W=R[1];Object(a.useEffect)((function(){N.get(i).then((function(e){return console.log("All Customers fetched"),T(e.data),!0})).catch((function(e){return console.log(e),alert("Network Error"),!1})),N.get(d).then((function(e){return console.log("All Dealers fetched"),W(e.data),!0})).catch((function(e){return console.log(e),alert("Network Error"),!1}))}),[i,d]),Object(a.useEffect)((function(){if(c.deal){var e=Object(x.a)({},c.deal.customer);g(e),P(Object(x.a)(Object(x.a)({},e),{},{contact_no:e.contact_no||""}));var t=Object(x.a)({},c.deal.dealer);_(t),A(Object(x.a)(Object(x.a)({},t),{},{contact_no:t.contact_no||""}))}}),[c.deal]);var K,U=function(e){return console.log("Dealer to be Saved: ",e),N.post(d,e).then((function(e){return console.log("Dealer Saved ",e),W([].concat(Object(V.a)(q),[e.data])),e.data})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request! Customer Not Saved"),!1}))};if(c.deal){var Y=t+"projects/".concat(n,"/deals/").concat(c.deal.id,"/");K=function(e){return N.put(Y,e).then((function(e){console.log(e);var t=Object(x.a)({},c);return t.deal=e.data,r(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}else{K=function(e){return N.post(o,e).then((function(e){console.log(e);var t=Object(x.a)({},c);return t.deal=e.data,r(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}var M=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,a,r,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==k.name.length&&0!==I.name.length){e.next=4;break}return alert("Enter Customer Name and Dealer Name"),e.abrupt("return");case 4:if(0===k.contact_no.length||10===k.contact_no.length){e.next=7;break}return alert("You can either leave Contact No blank or fill it with a 10-digit Number"),e.abrupt("return");case 7:if(0===I.contact_no.length||10===I.contact_no.length){e.next=10;break}return alert("You can either leave Contact No blank or fill it with a 10-digit Number"),e.abrupt("return");case 10:if(console.log(h,y),n=!1,a=!1,null!==h){e.next=21;break}if(!z.find((function(e){return k.contact_no===e.contact_no}))){e.next=18;break}return alert("Customer With this Contact Number Already Exists. Please Select it from drop down!"),e.abrupt("return");case 18:n=!0,e.next=27;break;case 21:if(h.name!==k.name||h.contact_no!==k.contact_no&&(null!==h.contact_no||""!==k.contact_no)){e.next=25;break}n=!1,e.next=27;break;case 25:return alert("You cannot edit an existing customer's details. If you want to add a new customer, enter their details manually without selecting anything from the dropdown"),e.abrupt("return");case 27:if(null!==y){e.next=35;break}if(!q.find((function(e){return I.contact_no===e.contact_no}))){e.next=32;break}return alert("Dealer With this Contact Number Already Exists! Please select it from the drop down!"),e.abrupt("return");case 32:a=!0,e.next=41;break;case 35:if(y.name!==I.name||y.contact_no!==I.contact_no&&(null!==y.contact_no||""!==I.contact_no)){e.next=39;break}a=!1,e.next=41;break;case 39:return alert("You cannot edit an existing dealer's details. If you want to add a new customer, enter their details manually without selecting anything from the dropdown"),e.abrupt("return");case 41:if(r={plot_id:c.id},console.log("Add Deal: == ",n,a),!n){e.next=53;break}return delete(l=Object(x.a)({},k)).contact_no,delete l.id,l.contact_no=k.contact_no,console.log(l),e.next=51,(d=l,console.log("Customer to be Saved: ",d),N.post(i,d).then((function(e){return console.log("Customer Saved ",e),T([].concat(Object(V.a)(z),[e.data])),e.data})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request! Customer not saved!"),!1}))).then((function(e){r.customer_id=e.id}));case 51:e.next=54;break;case 53:r.customer_id=h.id;case 54:if(!a){e.next=62;break}return delete(o=Object(x.a)({},I)).id,console.log(I),e.next=60,U(o).then((function(e){r.dealer_id=e.id}));case 60:e.next=63;break;case 62:r.dealer_id=y.id;case 63:return console.log(r),e.next=66,K(r).then((function(e){e&&s(!1)}));case 66:case"end":return e.stop()}var d}),e)})));return function(t){return e.apply(this,arguments)}}(),G={display:"flex",alignItems:"center"};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"card col-lg-11 mx-4 my-3",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title border-bottom pb-2",children:"Deal"}),Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-3",style:G,children:Object(j.jsx)(Re.a,{id:"customer_name",autoHighlight:!0,freeSolo:!0,fullWidth:!0,options:z.map((function(e){return e})),getOptionLabel:function(e){return e.name||""},value:h,onChange:function(e,t,n){g(t)},inputValue:k.name,onInputChange:function(e,t){P(Object(x.a)(Object(x.a)({},k),{},{name:t}))},renderInput:function(e){return Object(j.jsx)(w.a,Object(x.a)(Object(x.a)({},e),{},{autoFocus:!0,label:"Customer Name",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})}),Object(j.jsx)("div",{className:"col-sm-3",style:G,children:Object(j.jsx)(Re.a,{autoHighlight:!0,id:"customer_contact",freeSolo:!0,fullWidth:!0,options:z.filter((function(e){return e.contact_no})).map((function(e){return e})),getOptionLabel:function(e){return e.contact_no||""},value:h,onChange:function(e,t,n){return g(t)},inputValue:k.contact_no||"",onInputChange:function(e,t){P(Object(x.a)(Object(x.a)({},k),{},{contact_no:t}))},renderInput:function(e){return Object(j.jsx)(w.a,Object(x.a)(Object(x.a)({},e),{},{label:"Customer Contact",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})}),Object(j.jsx)("div",{className:"col-sm-3",style:G,children:Object(j.jsx)(Re.a,{autoHighlight:!0,id:"dealer_name",freeSolo:!0,fullWidth:!0,options:q.map((function(e){return e})),getOptionLabel:function(e){return e.name||""},value:y,onChange:function(e,t,n){return _(t)},inputValue:I.name||"",onInputChange:function(e,t){A(Object(x.a)(Object(x.a)({},I),{},{name:t}))},renderInput:function(e){return Object(j.jsx)(w.a,Object(x.a)(Object(x.a)({},e),{},{label:"Dealer Name",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})}),Object(j.jsx)("div",{className:"col-sm-3",style:G,children:Object(j.jsx)(Re.a,{id:"dealer_contact",freeSolo:!0,fullWidth:!0,options:q.filter((function(e){return e.contact_no})).map((function(e){return e})),getOptionLabel:function(e){return e.contact_no||""},value:y,onChange:function(e,t,n){return _(t)},inputValue:I.contact_no||"",onInputChange:function(e,t){A(Object(x.a)(Object(x.a)({},I),{},{contact_no:t}))},renderInput:function(e){return Object(j.jsx)(w.a,Object(x.a)(Object(x.a)({},e),{},{label:"Dealer Contact",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})})]}),Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){M(e)},style:{margin:"5px 5px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),s(!1)},style:{margin:"5px 5px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})]})})})}function Ve(e){e.title;var t=e.base_url,n=e.project_id,c=e.plot_details,r=e.setPlotDetails,s=(e.index,t+"projects/".concat(n,"/deals/").concat(c.deal.id,"/")),i=Object(a.useState)(!1),d=Object(l.a)(i,2),u=d[0],b=d[1],m={display:"flex",alignItems:"center"};return u?Object(j.jsx)(qe,{title:"Deals",base_url:t,project_id:n,plot_details:c,setPlotDetails:r,index:c.id,setEditingView:b}):Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"card col-lg-11 mx-4 my-2",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title border-bottom pb-2",children:"Deal"}),Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Customer Name",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.customer.name})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Customer Contact",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.customer.contact_no})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(o.b,{to:"/customers",children:Object(j.jsx)("button",{className:"btn btn-sm btn-secondary",children:"Edit Customer"})})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Dealer Name",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.dealer.name})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Dealer Contact",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.dealer.contact_no})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(o.b,{to:"/dealers",children:Object(j.jsx)("button",{className:"btn btn-sm btn-secondary",children:" Edit Dealer "})})})]}),Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Total Commission",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_commission_paid})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Total Rebate",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_rebate})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Total Interest Given",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_interest_given})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Total Amount Paid",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_amount_paid})}),Object(j.jsx)("div",{className:"col-sm-2",style:m,children:Object(j.jsx)(w.a,{label:"Balance",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.balance})})]}),Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),b(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-primary",children:"Edit"}),Object(j.jsx)("button",{onClick:function(e){return function(e){return e.preventDefault(),N.delete(s).then((function(e){r(Object(x.a)(Object(x.a)({},c),{},{deal:null})),console.log("Successfully Deleted",e)})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}(e)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})]})]})})]})})})}function We(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,s=Object(a.useState)(t.due_date),o=Object(l.a)(s,2),i=o[0],d=o[1],u=Object(a.useState)(""),b=Object(l.a)(u,2),m=b[0],p=b[1];Object(a.useEffect)((function(){d(t.due_date),p(t.payable_amount)}),[t]);var O=function(e){if(i)if(m){var a={due_date:i,payable_amount:m};r(t.id,n,a).then((function(e){e&&c(!1)}))}else alert("Enter Due Date");else alert("Enter Due Date")};return Object(j.jsxs)("tr",{onKeyPress:function(e){"Enter"===e.key&&O()},children:[Object(j.jsx)("td",{children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:i,onChange:function(e){d(e.target.value)},placeholder:"Due Date"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:m,onChange:function(e){p(e.target.value)},placeholder:"Payable Amount"})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:O,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){c(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})}function Ke(e){var t=e.title,n=e.obj,c=(e.base_url,e.project_id,e.index),r=e.updateItem,s=e.deleteItem,o=Object(a.useState)(!1),i=Object(l.a)(o,2),d=i[0],u=i[1];return!0===d?Object(j.jsx)(We,{title:t,obj:n,index:c,updateItem:r,setEditingView:u}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[" ",function(){var e=new Date(n.due_date);return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())}()," "]}),Object(j.jsxs)("td",{children:[" ",n.payable_amount," "]}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){return u(!0)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return s(n.id,c)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})})]})})}function Ue(e){e.title;var t=e.setCreateView,n=e.saveItem,c=Object(a.useState)((new Date).toISOString().substring(0,10)),r=Object(l.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)(""),d=Object(l.a)(i,2),u=d[0],b=d[1];return Object(j.jsx)("form",{onSubmit:function(e){(e.preventDefault(),s)?u?n({due_date:s,payable_amount:u}).then((function(e){e&&(o((new Date).toISOString().substring(0,10)),b(""))})):alert("Enter Payable Amount"):alert("Enter Due Date")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:s,onChange:function(e){o(e.target.value)},placeholder:"Due Date"})}),Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:u,onChange:function(e){b(e.target.value)},placeholder:"Payable Amount"})}),Object(j.jsx)("div",{className:"col-sm-2",style:{textAlign:"right"},children:Object(j.jsx)("button",{style:{marginRight:"2px"},className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1)},style:{marginLeft:"2px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})})}function Ye(e){var t=e.title,n=e.base_url,c=e.project_id,r=e.plot_details,s=e.setPlotDetails,o=(e.index,n+"projects/".concat(c,"/deals/").concat(r.deal.id,"/dues/")),i=["Due Date","Payable Amount"],d=Object(a.useState)(!1),u=Object(l.a)(d,2),b=u[0],m=u[1],p=function(e,t,n){return N.put(o+"".concat(e,"/"),n).then((function(e){console.log(e);var n=Object(x.a)({},r);return n.deal.dues[t]=e.data,s(n),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},O=function(e,t){return N.delete(o+"".concat(e,"/")).then((function(e){console.log("Deleted Successfully",e);var n=Object(x.a)({},r);return n.deal.dues[t]=null,s(n),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))};return Object(j.jsx)("div",{className:"card col-lg-6 mx-4 my-3",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("h5",{className:"card-title border-bottom pb-2",children:[" ",t," "]}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[i.map((function(e){return Object(j.jsxs)("th",{scope:"col",children:[" ",e," "]},e)})),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),Object(j.jsx)("tbody",{children:r.deal.dues&&r.deal.dues.map((function(e,r){return e?Object(j.jsx)(Ke,{index:r,project_id:c,title:t,obj:e,base_url:n,updateItem:p,deleteItem:O},r):Object(j.jsx)(a.Fragment,{},r)}))})]}),!0===b&&Object(j.jsx)(Ue,{title:"Dues",setCreateView:m,saveItem:function(e){return N.post(o,e).then((function(e){console.log(e.data);var t=Object(x.a)({},r);return t.deal.dues.push(e.data),s(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}),!1===b&&Object(j.jsxs)("button",{onClick:function(){m(!0)},style:{marginLeft:"10px"},className:"btn btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})]})})}function Me(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,s=Object(a.useState)((new Date).toISOString().substring(0,10)),o=Object(l.a)(s,2),i=o[0],d=o[1],u=Object(a.useState)(0),b=Object(l.a)(u,2),m=b[0],p=b[1],O=Object(a.useState)(0),h=Object(l.a)(O,2),x=h[0],g=h[1],f=Object(a.useState)(0),v=Object(l.a)(f,2),y=v[0],_=v[1];Object(a.useEffect)((function(){d(t.date),p(t.interest_given),g(t.rebate),_(t.net_amount_paid)}),[t]);var N=function(e){if(i)if(""!==m)if(""!==x)if(""!==y){var a={date:i,interest_given:m,rebate:x,net_amount_paid:y};r(t.id,n,a).then((function(e){e&&c(!1)}))}else alert("Enter Net Amount Paid");else alert("Enter Rebate");else alert("Enter Interest Given");else alert("Enter Date")};return Object(j.jsxs)("tr",{onKeyPress:function(e){"Enter"===e.key&&N()},children:[Object(j.jsx)("td",{children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:i,onChange:function(e){d(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:m,onChange:function(e){p(e.target.value)},placeholder:"Interest Given"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:x,onChange:function(e){g(e.target.value)},placeholder:"Rebate"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:y,onChange:function(e){_(e.target.value)},placeholder:"Net Amount Paid"})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:N,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){c(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})}function Ge(e){var t=e.title,n=e.obj,c=(e.base_url,e.project_id,e.index),r=e.updateItem,s=e.deleteItem,o=Object(a.useState)(!1),i=Object(l.a)(o,2),d=i[0],u=i[1];return!0===d?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(Me,{title:t,obj:n,index:c,updateItem:r,setEditingView:u})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[" ",function(){var e=new Date(n.date);return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())}()," "]}),Object(j.jsxs)("td",{children:[" ",n.interest_given," "]}),Object(j.jsxs)("td",{children:[" ",n.rebate," "]}),Object(j.jsxs)("td",{children:[" ",n.net_amount_paid," "]}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){return u(!0)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return s(n.id,c)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})})]})})}function He(e){e.title;var t=e.setCreateView,n=e.saveItem,c=Object(a.useState)((new Date).toISOString().substring(0,10)),r=Object(l.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)(""),d=Object(l.a)(i,2),u=d[0],b=d[1],m=Object(a.useState)(""),p=Object(l.a)(m,2),O=p[0],h=p[1],x=Object(a.useState)(""),g=Object(l.a)(x,2),f=g[0],v=g[1];return Object(j.jsx)("form",{onSubmit:function(e){(e.preventDefault(),s)?""!==u?""!==O?""!==f?n({date:s,interest_given:u,rebate:O,net_amount_paid:f}).then((function(e){e&&(o((new Date).toISOString().substring(0,10)),b(""),h(""),v(""))})):alert("Enter Net Amount Paid!"):alert("Enter Rebate"):alert("Enter interest Given"):alert("Enter Payment Date")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-sm-3",children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:s,onChange:function(e){o(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:u,onChange:function(e){b(e.target.value)},placeholder:"Interest Given"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:O,onChange:function(e){h(e.target.value)},placeholder:"Rebate"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:f,onChange:function(e){v(e.target.value)},placeholder:"Net Amount Paid"})}),Object(j.jsxs)("div",{className:"col-sm-3",style:{textAlign:"right"},children:[Object(j.jsx)("button",{style:{marginRight:"2px"},className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1)},style:{marginLeft:"2px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})}function Je(e){var t=e.title,n=e.base_url,c=e.project_id,r=e.plot_details,s=e.setPlotDetails,o=(e.index,n+"projects/".concat(c,"/deals/").concat(r.deal.id,"/payments/")),i=["Date","Interest Given","Rebate","Net Amount Paid"],d=Object(a.useState)(!1),u=Object(l.a)(d,2),b=u[0],m=u[1],p=function(e,t,n){return N.put(o+"".concat(e,"/"),n).then((function(e){console.log(e);var n=Object(x.a)({},r);return n.deal.payments[t]=e.data,s(n),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},O=function(e,t){return N.delete(o+"".concat(e,"/")).then((function(e){console.log("Deleted Successfully",e);var n=Object(x.a)({},r);return n.deal.payments[t]=null,s(n),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))};return Object(j.jsx)("div",{className:"card col-xl-9 mx-4",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("h5",{className:"card-title border-bottom pb-2",children:[" ",t," "]}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[i.map((function(e){return Object(j.jsxs)("th",{scope:"col",children:[" ",e," "]},e)})),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),Object(j.jsx)("tbody",{children:r.deal.payments&&r.deal.payments.map((function(e,r){return e?Object(j.jsx)(Ge,{index:r,project_id:c,title:t,obj:e,base_url:n,updateItem:p,deleteItem:O},e.id):Object(j.jsx)(a.Fragment,{},"deleted - "+r)}))})]}),!0===b&&Object(j.jsx)(He,{title:"Payments",setCreateView:m,saveItem:function(e){return N.post(o,e).then((function(e){console.log(e.data);var t=Object(x.a)({},r);return t.deal.payments.push(e.data),s(t),!0})).catch((function(e){return alert("Network Error! Try Again"),console.log(e),!1}))}}),!1===b&&Object(j.jsxs)("button",{onClick:function(){m(!0)},style:{marginLeft:"10px"},className:"btn btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})]})})}function Qe(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,s=Object(a.useState)((new Date).toISOString().substring(0,10)),o=Object(l.a)(s,2),i=o[0],d=o[1],u=Object(a.useState)(""),b=Object(l.a)(u,2),m=b[0],p=b[1];Object(a.useEffect)((function(){d(t.date),p(t.amount)}),[t]);var O=function(e){if(e.preventDefault(),i)if(""!==m){var a={date:i,amount:m};r(t.id,n,a).then((function(e){e&&c(!1)}))}else alert("Enter Amount");else alert("Enter Commission Date")};return Object(j.jsxs)("tr",{onKeyPress:function(e){"Enter"===e.key&&O()},children:[Object(j.jsx)("td",{children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:i,onChange:function(e){d(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:m,onChange:function(e){p(e.target.value)},placeholder:"Amount"})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:O,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){c(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})}function Xe(e){var t=e.title,n=e.obj,c=(e.base_url,e.project_id,e.index),r=e.updateItem,s=e.deleteItem,o=Object(a.useState)(!1),i=Object(l.a)(o,2),d=i[0],u=i[1];return!0===d?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(Qe,{title:t,obj:n,index:c,updateItem:r,setEditingView:u})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[" ",function(){var e=new Date(n.date);return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())}()," "]}),Object(j.jsxs)("td",{children:[" ",n.amount," "]}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){return u(!0)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return s(n.id,c)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})})]})})}function Ze(e){e.title;var t=e.setCreateView,n=e.saveItem,c=Object(a.useState)((new Date).toISOString().substring(0,10)),r=Object(l.a)(c,2),s=r[0],o=r[1],i=Object(a.useState)(""),d=Object(l.a)(i,2),u=d[0],b=d[1];return Object(j.jsx)("form",{onSubmit:function(e){(e.preventDefault(),s)?""!==u?n({date:s,amount:u}).then((function(e){e&&(o((new Date).toISOString().substring(0,10)),b(""))})):alert("Enter Amount"):alert("Enter Commission Date")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:s,onChange:function(e){o(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:u,onChange:function(e){b(e.target.value)},placeholder:"Amount"})}),Object(j.jsx)("div",{className:"col-sm-2",style:{textAlign:"right"},children:Object(j.jsx)("button",{style:{marginRight:"2px"},className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1)},style:{marginLeft:"2px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})})}function $e(e){var t=e.title,n=e.base_url,c=e.project_id,r=e.plot_details,s=e.setPlotDetails,o=(e.index,n+"projects/".concat(c,"/deals/").concat(r.deal.id,"/commissions/")),i=["Date","Amount"],d=Object(a.useState)(!1),u=Object(l.a)(d,2),b=u[0],m=u[1],p=function(e,t,n){return N.put(o+"".concat(e,"/"),n).then((function(e){console.log(e);var n=Object(x.a)({},r);return n.deal.commission_payments[t]=e.data,s(n),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},O=function(e,t){return N.delete(o+"".concat(e,"/")).then((function(e){console.log("Deleted Successfully",e);var n=Object(x.a)({},r);return n.deal.commission_payments[t]=null,s(n),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))};return Object(j.jsx)("div",{className:"card col-xl-5 mx-4 my-3",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("h5",{className:"card-title border-bottom pb-2",children:[" ",t," "]}),Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[i.map((function(e){return Object(j.jsxs)("th",{scope:"col",children:[" ",e," "]},e)})),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),Object(j.jsx)("tbody",{children:r.deal.commission_payments&&r.deal.commission_payments.map((function(e,r){return e?Object(j.jsx)(Xe,{index:r,project_id:c,title:t,obj:e,base_url:n,updateItem:p,deleteItem:O},e.id):Object(j.jsx)(a.Fragment,{},"deleted - "+r)}))})]}),!0===b&&Object(j.jsx)(Ze,{title:"Commission Payments",setCreateView:m,saveItem:function(e){return N.post(o,e).then((function(e){console.log(e.data);var t=Object(x.a)({},r);return t.deal.commission_payments.push(e.data),s(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}),!1===b&&Object(j.jsxs)("button",{onClick:function(){m(!0)},style:{marginLeft:"10px"},className:"btn btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})]})})}function et(e){var t=e.base_url,n=e.match,c=n.params.project_id,r=n.params.plot_id,s=t+"projects/"+c+"/plots/"+r,i=Object(a.useState)({deal:null}),d=Object(l.a)(i,2),u=d[0],b=d[1],m=Object(a.useState)(!1),p=Object(l.a)(m,2),O=p[0],h=p[1],x=Object(a.useState)(null),g=Object(l.a)(x,2),f=g[0],v=g[1],y=Object(a.useState)(!1),_=Object(l.a)(y,2),C=_[0],S=_[1];Object(a.useEffect)((function(){N.get(s).then((function(e){S(!0),b(e.data),console.log(e)})).catch((function(e){S(!0),v(e),console.log(e)}))}),[s]);return Object(j.jsx)("div",{className:"my-4 px-3",children:Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{paddingBottom:"10px"},children:Object(j.jsxs)("h1",{children:[" ",Object(j.jsxs)(o.b,{to:"/projects/".concat(u.project_id),style:{textDecoration:"none",color:"inherit"},children:[" ",u.project_name," "]})]})}),Object(j.jsx)("div",{children:f?Object(j.jsxs)(j.Fragment,{children:[" Error: ",f.message," "]}):C?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(Be,{title:"Plots",base_url:t,project_id:c,plot_details:u,setPlotDetails:b,index:u.id}),u.deal?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ve,{title:"Deals",base_url:t,project_id:c,plot_details:u,setPlotDetails:b,index:u.deal.id}),Object(j.jsx)(Ye,{title:"Dues",base_url:t,project_id:c,plot_details:u,setPlotDetails:b,index:u.deal.id}),Object(j.jsx)($e,{title:"Commission Payments",base_url:t,project_id:c,plot_details:u,setPlotDetails:b,index:u.deal.id}),Object(j.jsx)(Je,{title:"Payments",base_url:t,project_id:c,plot_details:u,setPlotDetails:b,index:u.deal.id})]}):Object(j.jsx)(j.Fragment,{}),!u.deal&&O?Object(j.jsx)(qe,{title:"Deals",base_url:t,project_id:c,plot_details:u,setPlotDetails:b,index:u.id,setEditingView:h,setDealCreated:""}):Object(j.jsx)(j.Fragment,{}),u.deal||O?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)("div",{className:"col-lg-7",children:Object(j.jsx)("button",{onClick:function(){h(!0)},type:"button",className:"btn btn-primary m-3",children:"Add Deal"})})]})}):Object(j.jsx)(j.Fragment,{children:" Loading... "})})]})})}var tt=n(116),nt=n(245),at=n(239),ct=n(238);function rt(e){e.title;var t=e.setCreateView,n=e.saveItem,r=Object(a.useState)(""),s=Object(l.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(""),u=Object(l.a)(d,2),b=u[0],m=u[1],p=Object(a.useState)(""),O=Object(l.a)(p,2),h=O[0],x=O[1],g=Object(a.useState)(""),f=Object(l.a)(g,2),v=f[0],y=f[1],_=c.a.useRef(null);c.a.useEffect((function(){_.current&&_.current.focus()}),[]);return Object(j.jsx)("form",{onSubmit:function(e){(e.preventDefault(),o)?n({name:o,address:b,total_plots:h,total_area:v}).then((function(e){e&&(i(""),m(""),x(""),y(""),_.current.focus())})):alert("Enter Project Name")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{ref:_,type:"text",className:"form-control",value:o,onChange:function(e){i(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:b,onChange:function(e){m(e.target.value)},placeholder:"Address"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:h,onChange:function(e){x(e.target.value)},placeholder:"No. of Plots"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:v,onChange:function(e){y(e.target.value)},placeholder:"Total Area"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{type:"submit",style:{marginLeft:"80px"},className:"btn btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1)},style:{marginRight:"50px"},className:"btn btn-danger",children:"Cancel"})})]})})}function st(e){var t=e.title,n=e.setCreateView,c=e.saveItem,r=Object(a.useState)(""),s=Object(l.a)(r,2),o=s[0],i=s[1],d=Object(a.useState)(""),u=Object(l.a)(d,2),b=u[0],m=u[1],p=Object(a.useState)(""),O=Object(l.a)(p,2),h=O[0],x=O[1];return Object(j.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),o)if(b&&10!==b.length)alert("Enter 10 digit Contact No or Nothing at all");else{var n={name:o,contact_no:b,other_info:h};b||(n.contact_no=null),c(n).then((function(e){e&&(i(""),m(""),x(""))}))}else alert("Enter "+t.substring(0,t.length-1)+" Name")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{autoFocus:!0,type:"text",className:"form-control",value:o,onChange:function(e){i(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:b,onChange:function(e){m(e.target.value)},placeholder:"Contact Number"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:h,onChange:function(e){x(e.target.value)},placeholder:"Other Info"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{type:"submit",style:{marginLeft:"80px"},className:"btn btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),n(!1)},style:{marginRight:"50px"},className:"btn btn-danger",children:"Cancel"})})]})})}var lt=["title","base_url"];function ot(e){var t=e.title,n=e.base_url,r=(Object(tt.a)(e,lt),{Projects:n+"projects/",Dealers:n+"dealers/",Customers:n+"customers/"}),s={Projects:["Name","Address","Total Plots","Total Area","Plots Sold","Area Sold","Plots Left","Area Left"],Dealers:["Name","Contact No","Other Info"],Customers:["Name","Contact No","Other Info"]},o=Object(a.useState)(!1),i=Object(l.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(!1),m=Object(l.a)(b,2),p=m[0],O=m[1],h=Object(a.useState)(null),x=Object(l.a)(h,2),g=x[0],f=x[1],v=Object(a.useState)(!1),y=Object(l.a)(v,2),_=y[0],C=y[1],k=Object(a.useState)([]),w=Object(l.a)(k,2),P=w[0],D=w[1];Object(a.useEffect)((function(){N.get(n+t.toLowerCase()+"/").then((function(e){console.log(e),C(!0),D(Object(V.a)(e.data))})).catch((function(e){return console.log("Network Error! ",e.response),f(e.response.data.detail),C(!1),!1}))}),[n,t]);var E=function(e){return N.post(r[t],e).then((function(e){return console.log(e),D([].concat(Object(V.a)(P),[e.data])),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},I=function(e,n,a){return N.put(r[t]+"".concat(e,"/"),a).then((function(e){console.log(e.data);var t=Object(V.a)(P);return t[n]=e.data,D(t),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},A=function(e,n){N.delete(r[t]+"".concat(n.id,"/")).then((function(t){console.log(t);var n=Object(V.a)(P);n[e]=null,D(n)})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},F=function(){var e=function(){O(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(nt.a,{open:p,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(ct.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(at.a,{children:[Object(j.jsx)(S.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(S.a,{onClick:A,color:"primary",children:"Yes"})]})]})})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsxs)("div",{className:"my-4 px-3",children:[Object(j.jsx)("div",{style:{paddingBottom:"10px",paddingLeft:"10px"},children:Object(j.jsxs)("h1",{children:[" ",t," "]})}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[s[t].map((function(e){return Object(j.jsxs)("th",{scope:"col",children:[" ",e," "]},e)})),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),g?Object(j.jsx)("tbody",{children:Object(j.jsx)("tr",{children:Object(j.jsxs)("td",{children:[" Error: ",g," "]})})}):_?Object(j.jsx)("tbody",{children:P.map((function(e,n){return e?Object(j.jsx)(q,{title:t,obj:e,index:n,updateItem:I,deleteItem:A},e.id):Object(j.jsx)(c.a.Fragment,{},n)}))}):Object(j.jsx)("tbody",{children:Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:" Loading... "})})})]}),!0===d&&function(e){return"Projects"===e?Object(j.jsx)(rt,{title:e,setCreateView:u,saveItem:E}):Object(j.jsx)(st,{title:e,setCreateView:u,saveItem:E})}(t),!1===d&&Object(j.jsxs)("button",{onClick:function(){u(!0)},style:{marginLeft:"10px"},className:"btn btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})]})]})}function it(e){e.title;var t=e.base_url,n=Object(i.g)(),c=Object(i.f)(),r=t+"customers/"+n.customer_id+"/",s=Object(a.useState)({name:"",contact_no:"",other_info:""}),o=Object(l.a)(s,2),d=o[0],u=o[1],b=Object(a.useState)(""),m=Object(l.a)(b,2),p=m[0],O=m[1],h=Object(a.useState)(""),x=Object(l.a)(h,2),g=x[0],f=x[1],v=Object(a.useState)(""),y=Object(l.a)(v,2),_=y[0],C=y[1],k=Object(a.useState)(!1),P=Object(l.a)(k,2),D=P[0],E=P[1],I=Object(a.useState)(!1),A=Object(l.a)(I,2),F=A[0],L=A[1];Object(a.useEffect)((function(){N.get(r).then((function(e){u(e.data)})).catch((function(e){console.log(e),alert("Network Error")}))}),[r]),Object(a.useEffect)((function(){O(d.name),f(d.contact_no),C(d.other_info)}),[d,D]);var z=function(){return N.delete(r).then((function(e){return console.log("Deleted Successfully",e),c.goBack(),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},T=function(){var e=function(){L(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(nt.a,{open:F,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(ct.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(at.a,{children:[Object(j.jsx)(S.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(S.a,{onClick:z,color:"primary",children:"Yes"})]})]})})},B={display:"flex",alignItems:"center"};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{}),Object(j.jsx)("div",{className:"card m-4",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-4",style:B,children:Object(j.jsx)(w.a,{label:"Name",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:p||"",onChange:function(e){return O(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:B,children:Object(j.jsx)(w.a,{label:"Contact No",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:g||"",onChange:function(e){return f(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:B,children:Object(j.jsx)(w.a,{label:"Other Info",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:_||"",onChange:function(e){return C(e.target.value)}})})]}),!1===D?Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),E(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"}),Object(j.jsx)("button",{onClick:function(){return L(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})]}):Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){var t;(e.preventDefault(),p)?g&&10!==g.length?alert("Enter Contact No of Length 10 or dont enter anything"):(t={name:p,contact_no:g||null,other_info:_},N.put(r,t).then((function(e){return console.log(e),u(e.data),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))).then((function(e){e&&E(!1)})):alert("Enter Name")},style:{margin:"5px 5px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),E(!1)},style:{margin:"5px 5px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})})})]})}function dt(e){e.title;var t=e.base_url,n=Object(i.g)(),c=Object(i.f)(),r=t+"dealers/"+n.dealer_id+"/",s=Object(a.useState)({name:"",contact_no:"",other_info:""}),o=Object(l.a)(s,2),d=o[0],u=o[1],b=Object(a.useState)(""),m=Object(l.a)(b,2),p=m[0],O=m[1],h=Object(a.useState)(""),x=Object(l.a)(h,2),g=x[0],f=x[1],v=Object(a.useState)(""),y=Object(l.a)(v,2),_=y[0],C=y[1],k=Object(a.useState)(!1),P=Object(l.a)(k,2),D=P[0],E=P[1],I=Object(a.useState)(!1),A=Object(l.a)(I,2),F=A[0],L=A[1];Object(a.useEffect)((function(){N.get(r).then((function(e){u(e.data)})).catch((function(e){console.log(e),alert("Network Error")}))}),[r]),Object(a.useEffect)((function(){O(d.name),f(d.contact_no),C(d.other_info)}),[d,D]);var z=function(){return N.delete(r).then((function(e){return console.log("Deleted Successfully",e),c.goBack(),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},T=function(){var e=function(){L(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(nt.a,{open:F,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(ct.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(at.a,{children:[Object(j.jsx)(S.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(S.a,{onClick:z,color:"primary",children:"Yes"})]})]})})},B={display:"flex",alignItems:"center"};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{}),Object(j.jsx)("div",{className:"card m-4",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-4",style:B,children:Object(j.jsx)(w.a,{label:"Name",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:p||"",onChange:function(e){return O(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:B,children:Object(j.jsx)(w.a,{label:"Contact No",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:g||"",onChange:function(e){return f(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:B,children:Object(j.jsx)(w.a,{label:"Other Info",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:_||"",onChange:function(e){return C(e.target.value)}})})]}),!1===D?Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),E(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"}),Object(j.jsx)("button",{onClick:function(){return L(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})]}):Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){var t;(e.preventDefault(),p)?g&&10!==g.length?alert("Enter Contact No of Length 10 or dont enter anything"):(t={name:p,contact_no:g||null,other_info:_},N.put(r,t).then((function(e){return console.log(e),u(e.data),!0})).catch((function(e){return console.log(e.response),"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))).then((function(e){e&&E(!1)})):alert("Enter Name")},style:{margin:"5px 5px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),E(!1)},style:{margin:"5px 5px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})})})]})}var ut="http://localhost:8000/realestate/";var jt=function(){var e=c.a.useState({sold:!1,unsold:!1,pending:!1,apply_dates:!1,start_date:(new Date).toISOString().substring(0,10),end_date:new Date((new Date).setMonth((new Date).getMonth()+1)).toISOString().substring(0,10)}),t=Object(l.a)(e,2),n=t[0],a=t[1],r=c.a.useState(null),s=Object(l.a)(r,2),m=s[0],p=s[1];return Object(j.jsx)("div",{children:Object(j.jsxs)(o.a,{children:[Object(j.jsx)(u.Provider,{value:{user:m,setUser:p},children:Object(j.jsx)(b,{title:"Rudra Estate",base_url:ut})}),Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{exact:!0,path:"/",render:function(){return Object(j.jsx)(ot,{title:"Projects",base_url:ut},"Projects")}}),Object(j.jsx)(i.a,{exact:!0,path:"/projects",render:function(){return Object(j.jsx)(ot,{title:"Projects",base_url:ut},"Projects")}}),Object(j.jsx)(i.a,{exact:!0,path:"/dealers",render:function(){return Object(j.jsx)(ot,{title:"Dealers",base_url:ut},"Dealers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/customers",render:function(){return Object(j.jsx)(ot,{title:"Customers",base_url:ut},"Customers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/dealers/:dealer_id",render:function(){return Object(j.jsx)(dt,{title:"Dealers",base_url:ut},"Dealers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/customers/:customer_id",render:function(){return Object(j.jsx)(it,{title:"Customers",base_url:ut},"Customers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/projects/:project_id/plots/:plot_id",render:function(e){return Object(j.jsx)(et,{base_url:ut,match:e.match})}}),Object(j.jsx)(d.Provider,{value:{filters:n,setFilters:a},children:Object(j.jsx)(i.a,{exact:!0,path:"/projects/:project_id",render:function(e){return Object(j.jsx)(Te,{base_url:ut,match:e.match})}})})]}),Object(j.jsx)(i.c,{children:Object(j.jsxs)(u.Provider,{value:{user:m,setUser:p},children:[Object(j.jsx)(i.a,{exact:!0,path:"/login",render:function(){return Object(j.jsx)(z,{title:"Login",base_url:ut},"Login")}}),Object(j.jsx)(i.a,{exact:!0,path:"/logout",render:function(){return Object(j.jsx)(T,{title:"Logout",base_url:ut},"Logout")}})]})})]})})},bt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(j.jsx)(jt,{}),document.getElementById("root")),bt()}},[[171,1,2]]]);