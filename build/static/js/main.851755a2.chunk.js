(this.webpackJsonpgreencity=this.webpackJsonpgreencity||[]).push([[0],{108:function(e,t){},141:function(e,t,n){},170:function(e,t){},171:function(e,t){},172:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(14),l=n.n(r),s=(n(141),n(5)),o=n(21),i=n(15),d=Object(a.createContext)(null),u=Object(a.createContext)(null),j=n(1);function b(e){var t=c.a.useContext(u).user;return Object(j.jsx)("div",{children:Object(j.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light",style:{backgroundColor:"#e3f2fd"},children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("span",{className:"navbar-brand",children:e.title}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(j.jsxs)("ul",{className:"navbar-nav",children:[Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.b,{to:"/projects",className:"nav-link","aria-current":"page",children:"Projects"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.b,{to:"/customers",className:"nav-link",children:"Customers"})}),Object(j.jsx)("li",{className:"nav-item",children:Object(j.jsx)(o.b,{to:"/dealers",className:"nav-link",children:"Dealers"})}),Object(j.jsx)("li",{className:"nav-item",children:t?Object(j.jsx)(o.b,{to:"/logout",className:"nav-link",children:"Logout"}):Object(j.jsx)(o.b,{to:"/login",className:"nav-link",children:"Login"})})]})})]})})})}b.defaultProps={title:"Rudra Estate"};var p=n(23),m=n.n(p),x=n(35),O=n(34),h=n(6),g=n(91),f=n.n(g),v="http://localhost:8000/",y=f.a.create({timeout:3e3,headers:{Authorization:localStorage.getItem("access_token")?"Bearer "+localStorage.getItem("access_token"):null}});y.interceptors.request.use((function(e){return e.headers.Authorization=localStorage.getItem("access_token")?"Bearer "+localStorage.getItem("access_token"):null,e}),(function(e){return Promise.reject(e)})),y.interceptors.response.use((function(e){return e}),function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a,c,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.config,"undefined"!==typeof t.response){e.next=4;break}return alert("A server/network error occurred"),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||n.url!==v+"api/token/refresh/"){e.next=7;break}return window.location.href="/login",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=23;break}if(!(a=localStorage.getItem("refresh_token"))){e.next=20;break}if(c=JSON.parse(atob(a.split(".")[1])),r=Math.ceil(Date.now()),!(1e3*c.exp>r)){e.next=16;break}return e.abrupt("return",y.post(v+"api/token/refresh/",{refresh:a}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),console.log("New Tokens are fetched"),y.defaults.headers.Authorization="Bearer "+e.data.access,n.headers.Authorization="Bearer "+e.data.access,y(n)})).catch((function(e){alert("Error occured while making request for refresh token"),console.log(e.request)})));case 16:console.log("Refresh token is expired",1e3*c.exp,r),window.location.href="/login";case 18:e.next=22;break;case 20:console.log("Refresh Token is not available"),window.location.href="/login";case 22:case 23:return e.abrupt("return",Promise.reject(t));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var _=f.a.create({baseURL:"http://localhost:8000/api/",timeout:3e3,headers:{Authorization:localStorage.getItem("access_token")?"Bearer "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}}),N=y,C=n(246),k=n(226),S=n(221),w=n(247),P=n(227),D=n(113),I=n.n(D),E=n(119),A=n(217),F=n(219),L=Object(A.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function z(){var e=L(),t=Object(a.useState)({username:"",password:""}),n=Object(s.a)(t,2),c=n[0],r=n[1],l=Object(a.useContext)(u).setUser,o=Object(i.f)();function d(e){r(Object(h.a)(Object(h.a)({},c),{},Object(O.a)({},e.target.name,e.target.value.trim())))}return Object(j.jsxs)(F.a,{component:"main",maxWidth:"xs",children:[Object(j.jsx)(S.a,{}),Object(j.jsxs)("div",{className:e.paper,children:[Object(j.jsx)(C.a,{children:Object(j.jsx)(I.a,{})}),Object(j.jsx)(E.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(j.jsxs)("form",{className:e.form,noValidate:!0,children:[Object(j.jsx)(w.a,{variant:"standard",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,onChange:d}),Object(j.jsx)(w.a,{variant:"standard",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:d}),Object(j.jsx)(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",onClick:function(e){e.preventDefault(),console.log(c),_.post("token/",{username:c.username,password:c.password}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),_.defaults.headers.Authorization="Bearer "+localStorage.getItem("access_token"),e.next=5,l(!0);case 5:o.push("/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e.response),"Unauthorized"===e.response.statusText?void alert(e.response&&e.response.data.detail):void alert("Plese Enter Username and Password")}))},className:e.submit,children:"Sign In"}),Object(j.jsx)(P.a,{container:!0})]})]})]})}function T(){var e=Object(i.f)(),t=Object(a.useContext)(u).setUser;return Object(a.useEffect)((function(){N.post("http://localhost:8000/api/logout/",{refresh_token:localStorage.getItem("refresh_token")}).then(function(){var n=Object(x.a)(m.a.mark((function n(a){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Successfully Logged Out",a),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),N.defaults.headers.Authorization=null,n.next=6,t(null);case 6:e.push("/");case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.log(e.response),alert(e)}))}),[e,t]),Object(j.jsx)(j.Fragment,{children:"Logout"})}function R(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,l=Object(a.useState)(""),o=Object(s.a)(l,2),i=o[0],d=o[1],u=Object(a.useState)(""),b=Object(s.a)(u,2),p=b[0],m=b[1],x=Object(a.useState)(""),O=Object(s.a)(x,2),h=O[0],g=O[1],f=Object(a.useState)(""),v=Object(s.a)(f,2),y=v[0],_=v[1];Object(a.useEffect)((function(){d(t.name),m(t.address),g(t.total_plots),_(t.total_area)}),[t]);var N=function(e){if(i){var a={name:i,address:p,total_plots:h,total_area:y};r(t.id,n,a).then((function(e){e&&(d(""),m(""),g(""),_(""),c(!1))}))}else alert("Enter Project Name")},C=function(e){"Enter"===e.key&&N()};return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:i,onChange:function(e){d(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:p,onChange:function(e){m(e.target.value)},placeholder:"Address"})}),Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:h,onChange:function(e){g(e.target.value)},placeholder:"No. of Plots"})}),Object(j.jsx)("td",{onKeyPress:C,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:y,onChange:function(e){_(e.target.value)},placeholder:"Total Area"})}),Object(j.jsx)("td",{className:"text-center",style:{paddingLeft:"10px"},children:Object(j.jsx)("button",{onClick:N,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){c(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})}),Object(j.jsx)("td",{}),Object(j.jsx)("td",{})]})}function B(e){var t=e.title,n=e.obj,c=e.index,r=e.setEditingView,l=e.updateItem,o=Object(a.useState)(""),i=Object(s.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(""),p=Object(s.a)(b,2),m=p[0],x=p[1],O=Object(a.useState)(""),h=Object(s.a)(O,2),g=h[0],f=h[1];Object(a.useEffect)((function(){u(n.name),null==n.contact_no?x(""):x(n.contact_no),f(n.other_info)}),[n]);var v=function(e){if(d){var a={name:d,contact_no:m,other_info:g};m||(a.contact_no=null),l(n.id,c,a).then((function(e){e&&(u(""),x(""),f(""),r(!1))}))}else alert("Enter "+t.substring(0,t.length-1)+" Name")};function y(e){"Enter"===e.key&&v()}return Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{onKeyPress:y,children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:d,onChange:function(e){u(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("td",{onKeyPress:y,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:m,onChange:function(e){x(e.target.value)},placeholder:"Contact No"})}),Object(j.jsx)("td",{onKeyPress:y,children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"text",className:"form-control",value:g,onChange:function(e){f(e.target.value)},placeholder:"Other Info"})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:v,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){r(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})}function q(e){var t=e.title,n=e.obj,c=e.index,r=e.updateItem,l=e.deleteItem,o=Object(i.f)(),d=Object(a.useState)(!1),u=Object(s.a)(d,2),b=u[0],p=u[1];return!0===b?Object(j.jsx)(j.Fragment,{children:"Projects"===t?Object(j.jsx)(R,{title:t,obj:n,index:c,updateItem:r,setEditingView:p}):Object(j.jsx)(B,{title:t,obj:n,index:c,updateItem:r,setEditingView:p})}):Object(j.jsx)(j.Fragment,{children:function(){var e=Object.keys(n);function a(){o.push("/".concat(t.toLowerCase(),"/").concat(n.id))}return e=e.filter((function(e){return!["id","name","plots","deal"].find((function(t){return t===e}))})),Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"row",style:{cursor:"pointer"},onClick:a,children:n.name}),e.map((function(e){return Object(j.jsxs)("td",{style:{cursor:"pointer"},onClick:a,children:[" ",n[e]," "]},e)})),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){return p(!0)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"})}),Object(j.jsx)("td",{children:"Projects"===t?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)("button",{onClick:function(){return l(c,n)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})})]})}()})}var V=n(18),W=n(236),Y=n(237),U=n(230),K=n(235),M=n(244),J=n(229),G=n(225),H=n(243),Q=n(231),X=n(232),Z=n(37),$=n.n(Z),ee=n(44),te=n.n(ee),ne=n(228),ae=n(250),ce=[{id:"actions",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 0px",label:"Actions",align:"left"},{id:"customer_name",numeric:!1,disablePadding:!0,padding:"0px 0px 0px 0px",label:"Customer",align:"left"},{id:"dealer_name",numeric:!1,disablePadding:!0,padding:"0px 0px 0px 0px",label:"Dealer",align:"left"},{id:"plot_no",numeric:!0,disablePadding:!0,paddingRight:"10px",padding:"0px 0px 0px 12px",label:"PlotNo",align:"left"},{id:"area",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"Area",align:"left"},{id:"rate",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",paddingRight:"16px",label:"Rate",align:"left"},{id:"plc",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"PLC",align:"left"},{id:"amount",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 0px",paddingRight:"16px",label:"Amount",align:"left"},{id:"total_commission_paid",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"Commission",align:"left"},{id:"total_rebate",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 0px",label:"Rebate",align:"left"},{id:"total_interest_given",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"Interest Given",align:"left"},{id:"total_amount_received",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"Amount Received",align:"left"},{id:"balance",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"Balance",align:"left"},{id:"oldest_due_date",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"Oldest DueDate",align:"left"},{id:"next_due_date",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 12px",label:"Next DueDate",align:"left"},{id:"next_payable_amount",numeric:!0,disablePadding:!0,padding:"0px 0px 0px 0px",paddingRight:"30px",label:"Payable Amount",align:"left"}];function re(e){var t=e.classes,n=e.onSelectAllClick,a=e.order,c=e.orderBy,r=e.numSelected,l=e.rowCount,s=e.onRequestSort;return Object(j.jsx)(ne.a,{children:Object(j.jsxs)(J.a,{children:[Object(j.jsx)(U.a,{padding:"checkbox",children:Object(j.jsx)(H.a,{indeterminate:r>0&&r<l,checked:l>0&&r===l,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),ce.map((function(e){return Object(j.jsx)(U.a,{align:e.align,padding:e.disablePadding?"none":"default",style:{fontWeight:"bold",padding:e.padding},sortDirection:c===e.id&&a,children:Object(j.jsxs)(ae.a,{active:c===e.id,direction:c===e.id?a:"asc",onClick:(n=e.id,function(e){s(e,n)}),children:[e.label,c===e.id?Object(j.jsx)("span",{className:t.visuallyHidden,children:"desc"===a?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})})}var le=n(68),se=n.n(le),oe=n(4),ie=n(10),de=n(233),ue=n(176),je=n(234),be=n(116),pe=n.n(be),me=n(115),xe=n.n(me),Oe=n(224),he=n(249),ge=n(240),fe=n(251),ve=Object(A.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120}}}));function ye(e){var t=e.plots,n=(e.rows,e.setRows),c=ve(),r=Object(a.useState)(""),l=Object(s.a)(r,2),o=l[0],i=l[1],u=Object(a.useState)("dealer_name"),b=Object(s.a)(u,2),p=b[0],m=b[1],x=o.toLowerCase(),O=Object(a.useContext)(d),g=O.filters,f=O.setFilters;return Object(a.useEffect)((function(){var e=Object(V.a)(t);e.forEach((function(e){e.deal?(e.balance=e.deal.balance,e.dealer_name=e.deal.dealer.name,e.customer_name=e.deal.customer.name,e.total_commission_paid=e.deal.total_commission_paid,e.total_interest_given=e.deal.total_interest_given,e.total_rebate=e.deal.total_rebate,e.total_amount_received=e.deal.total_amount_paid,e.deal.unpaid_dues.length?(e.oldest_due_date=new Date(e.deal.unpaid_dues[0].due_date),e.next_due_date=new Date(e.deal.unpaid_dues[0].due_date),e.next_payable_amount=e.deal.unpaid_dues[0].payable_amount-e.deal.unpaid_dues[0].paid):(e.next_due_date=null,e.next_payable_amount=null)):(e.balance=null,e.dealer_name=null,e.customer_name=null,e.total_commission_paid=null,e.total_interest_given=null,e.total_rebate=null,e.total_amount_received=null)})),n(e)}),[t,n]),Object(a.useEffect)((function(){var e=[];g.sold&&(e=g.pending?Object(V.a)(t).filter((function(e){return e.deal&&e.deal.penalty})):Object(V.a)(t).filter((function(e){return e.deal}))),g.unsold&&!g.pending&&(e=[].concat(Object(V.a)(e),Object(V.a)(Object(V.a)(t).filter((function(e){return!e.deal}))))),g.apply_dates&&(e=e.filter((function(e){if(e.deal){var t=e.deal.unpaid_dues.filter((function(e){var t=new Date(e.due_date).getTime();return new Date(g.start_date).getTime()<=t&&t<=new Date(g.end_date).getTime()}));return Boolean(t.length)}return!1}))),e.forEach((function(e){if(e.deal){var t=e.deal.unpaid_dues.filter((function(e){var t=new Date(e.due_date).getTime();return new Date(g.start_date).getTime()<=t&&t<=new Date(g.end_date).getTime()}));e.next_due_date=null,e.next_payable_amount=0,t.length&&(e.next_due_date=new Date(t[0].due_date),e.next_payable_amount=0,t.forEach((function(t){e.next_payable_amount=e.next_payable_amount+t.payable_amount-t.paid})))}})),x&&(e=e.filter((function(e){return"".concat(e[p])&&"".concat(e[p]).toLowerCase().includes(x)}))),n(e)}),[t,x,p,n,g.sold,g.unsold,g.pending,g.apply_dates,g.start_date,g.end_date]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(Oe.a,{className:c.formControl,children:[Object(j.jsx)(he.a,{id:"search-column",children:"Column"}),Object(j.jsx)(ge.a,{labelId:"search-column",id:"search-column",value:p,onChange:function(e){m(e.target.value)},children:ce.filter((function(e){return"actions"!==e.id})).map((function(e){return Object(j.jsx)(fe.a,{value:e.id,children:e.label},e.id)}))})]}),Object(j.jsx)(w.a,{label:"Query",style:{margin:"0px 5px",minWidth:"120px"},value:o,onChange:function(e){i(e.target.value)}}),Object(j.jsx)(w.a,{label:"Start Date",type:"date",value:g.start_date,onChange:function(e){f(Object(h.a)(Object(h.a)({},g),{},{start_date:e.target.value,apply_dates:!1}))},InputLabelProps:{shrink:!0},style:{margin:"0px 5px",minWidth:"130px"}}),Object(j.jsx)(w.a,{label:"End Date",type:"date",value:g.end_date,onChange:function(e){f(Object(h.a)(Object(h.a)({},g),{},{end_date:e.target.value,apply_dates:!1}))},InputLabelProps:{shrink:!0},style:{margin:"0px 5px",minWidth:"130px"}}),Object(j.jsx)(Q.a,{value:"apply-dates",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.apply_dates,onChange:function(){f(Object(h.a)(Object(h.a)({},g),{},{apply_dates:!g.apply_dates}))}}),label:"ApplyDates",labelPlacement:"top"}),Object(j.jsx)(Q.a,{value:"Sold",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.sold,onChange:function(){f(Object(h.a)(Object(h.a)({},g),{},{sold:!g.sold}))}}),label:"Sold",labelPlacement:"top"}),Object(j.jsx)(Q.a,{value:"Unsold",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.unsold,onChange:function(){f(Object(h.a)(Object(h.a)({},g),{},{unsold:!g.unsold}))}}),label:"Unsold",labelPlacement:"top"}),Object(j.jsx)(Q.a,{value:"Pending",control:Object(j.jsx)(X.a,{size:"small",color:"primary",checked:g.pending,onChange:function(){f(Object(h.a)(Object(h.a)({},g),{},{pending:!g.pending}))}}),label:"Pending",labelPlacement:"top"})]})}var _e=Object(A.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(ie.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}}));function Ne(e){var t=_e(),n=c.a.useState(!1),a=Object(s.a)(n,2),r=a[0],l=a[1],o=e.projectName,i=e.numSelected,d=e.plots,u=e.rows,b=e.totalPlots,p=e.setRows,m=e.setCurrentlyCreating,x=e.deleteMultipleItems,h=function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(E.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:["Are you sure you want to delete these ",i," plots?"]}),Object(j.jsx)(k.a,{onClick:x,children:" Yes "}),Object(j.jsx)(k.a,{onClick:function(){l(!1)},children:"No"})]})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(de.a,{className:Object(oe.a)(t.root,Object(O.a)({},t.highlight,i>0)),children:i>0?Object(j.jsx)(j.Fragment,{children:r?Object(j.jsx)(h,{}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(E.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div",children:[i," selected"]}),Object(j.jsx)(je.a,{title:"Delete",children:Object(j.jsx)(ue.a,{"aria-label":"delete",onClick:function(){l(!0)},children:Object(j.jsx)($.a,{})})})]})}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(E.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div",children:"Plots"}),Object(j.jsx)(je.a,{title:"Export",children:Object(j.jsx)(ue.a,{"aria-label":"export",onClick:function(){!function(e,t){var n=e.map((function(e){var t={PlotNo:e.plot_no,Area:e.area,Rate:e.rate,PLC:e.plc,Amount:e.amount,Dealer:e.dealer_name,Customer:e.deal?e.deal.customer.name:"",Commission:e.deal?e.deal.total_commission_paid:"",Balance:e.deal?e.deal.balance:"","Oldest Due Date":e.oldest_due_date?e.oldest_due_date.toISOString().substring(0,10).split("-").reverse().join("-"):"","Next Due Date":e.next_due_date?e.next_due_date.toISOString().substring(0,10).split("-").reverse().join("-"):"","Payable Amount":e.next_payable_amount||"",Penalty:e.deal?e.deal.penalty:"",UnpaidDues:""};return e.deal&&e.deal.unpaid_dues.forEach((function(e,n){t["DueDate-".concat(n+1)]=e.due_date.split("-").reverse().join("-"),t["Payable Amount-".concat(n+1)]=e.payable_amount-e.paid})),t})),a=se.a.utils.json_to_sheet(n),c=se.a.utils.book_new();se.a.utils.book_append_sheet(c,a,"".concat(t,"-plots")),se.a.writeFile(c,t+"-plots.xlsx")}(u,o)},children:Object(j.jsx)(xe.a,{})})}),Object(j.jsx)(je.a,{title:"Add Plot",children:Object(j.jsx)(ue.a,{disabled:d.length===b,"aria-label":"add plot",onClick:function(){m(!0)},children:Object(j.jsx)(pe.a,{})})})]})}),Object(j.jsxs)(de.a,{className:Object(oe.a)(t.root,Object(O.a)({},t.highlight,i>0)),style:{overflowX:"scroll"},children:[Object(j.jsx)(E.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"}),Object(j.jsx)(ye,{plots:d,rows:u,setRows:p})]})]})}var Ce=n(31),ke=n.n(Ce),Se=n(32),we=n.n(Se),Pe=function(e){var t=e.obj,n=e.setDeleteIdx,a=e.deleteItem;return Object(j.jsxs)(J.a,{children:[Object(j.jsx)(U.a,{padding:"checkbox"}),Object(j.jsxs)(U.a,{padding:"none",children:[Object(j.jsx)(ke.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:function(){a(t).then((function(){n(-1)}))}}),Object(j.jsx)(we.a,{style:{cursor:"pointer"},onClick:function(){return n(-1)}})]}),Object(j.jsx)(U.a,{padding:"none",style:{padding:"9px",fontSize:"17px"},colSpan:11,children:"Are you sure you want to delete this plot?"})]})},De=function(e){var t=e.setCurrentlyCreating,n=e.saveItem,r=Object(a.useState)({plot_no:"",area:"",rate:"",plc:""}),l=Object(s.a)(r,2),o=l[0],i=l[1],d=function(e){o.plot_no?o.area?(o.plc||(o.plc=0),n(Object(h.a)({},o)).then((function(e){e&&(u.current.focus(),i({plot_no:"",area:"",rate:"",plc:""}))}))):alert("Enter Area! If not sure enter any value"):alert("Enter Plot No")},u=c.a.useRef(null);return Object(a.useEffect)((function(){u.current&&u.current.focus()}),[]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(J.a,{onKeyUp:function(e){"Enter"===e.key?d():"Escape"===e.key&&(console.log("escape"),t(!1))},children:[Object(j.jsx)(U.a,{padding:"checkbox"}),Object(j.jsxs)(U.a,{padding:"none",children:[Object(j.jsx)(ke.a,{onClick:d,style:{cursor:"pointer"}}),Object(j.jsx)(we.a,{onClick:function(e){t(!1)},style:{cursor:"pointer"}})]}),Object(j.jsx)(U.a,{}),Object(j.jsx)(U.a,{}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{inputRef:u,style:{padding:"3px 3px"},type:"text",size:"small",value:o.plot_no||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{plot_no:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.area||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{area:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.rate||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{rate:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.plc||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{plc:e.target.value}))}})})]})})};function Ie(e){var t=e.obj,n=e.setEditIdx,c=e.updateItem,r=Object(a.useState)({plot_no:"",area:"",rate:"",plc:""}),l=Object(s.a)(r,2),o=l[0],i=l[1];Object(a.useEffect)((function(){i(Object(h.a)({},t))}),[t]);var d=function(e){o.plot_no?o.plc?c(Object(h.a)({},o)).then((function(e){e&&n(-1)})):o.plc=0:alert("Enter Plot No")},u=function(e){"Enter"===e.key?d():"Escape"===e.key&&n(-1)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(U.a,{padding:"none",children:[Object(j.jsx)(ke.a,{onClick:d,style:{cursor:"pointer"}}),Object(j.jsx)(we.a,{onClick:function(e){n(-1)},style:{cursor:"pointer"}})]}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},children:t.customer_name||""}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},children:t.dealer_name||""}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{autoFocus:!0,style:{padding:"3px 3px"},type:"text",size:"small",value:o.plot_no||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{plot_no:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.area||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{area:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.rate||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{rate:e.target.value}))}})}),Object(j.jsx)(U.a,{padding:"none",onKeyUp:u,children:Object(j.jsx)(w.a,{style:{padding:"3px 3px"},type:"text",size:"small",value:o.plc||"",onChange:function(e){i(Object(h.a)(Object(h.a)({},o),{},{plc:e.target.value}))}})})]})}function Ee(e){var t=e.rows,n=c.a.useState({total_plots:0,total_area:0,total_amount:0,total_commission:0,total_rebate:0,total_interest_given:0,total_amount_received:0,total_balance:0,total_payable_amount:0}),a=Object(s.a)(n,2),r=a[0],l=a[1],o={padding:"0px 0px 0px 12px"};return c.a.useEffect((function(){var e=Object(V.a)(t),n={total_plots:0,total_area:0,total_amount:0,total_commission:0,total_rebate:0,total_interest_given:0,total_amount_received:0,total_balance:0,total_payable_amount:0};e.length&&e.forEach((function(e){n.total_plots+=1,n.total_area+=e.area,n.total_amount+=e.amount,e.deal&&(n.total_commission+=e.deal.total_commission_paid,n.total_rebate+=e.deal.total_rebate,n.total_interest_given+=e.deal.total_interest_given,n.total_amount_received+=e.deal.total_amount_paid,n.total_balance+=e.deal.balance,n.total_payable_amount+=e.next_payable_amount)})),l(n)}),[t]),Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(J.a,{style:{backgroundColor:"#ddf7ff"},children:[Object(j.jsx)(U.a,{padding:"checkbox"}),Object(j.jsx)(U.a,{}),Object(j.jsx)(U.a,{}),Object(j.jsx)(U.a,{}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({},o),children:"#".concat(r.total_plots)}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({},o),children:r.total_area}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({},o)}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({},o)}),Object(j.jsx)(U.a,{align:"left",padding:"none",children:r.total_amount}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({},o),children:r.total_commission}),Object(j.jsx)(U.a,{align:"left",padding:"none",children:r.total_rebate}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({},o),children:r.total_interest_given}),Object(j.jsx)(U.a,{align:"left",padding:"default",style:Object(h.a)({},o),children:r.total_amount_received}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({},o),children:r.total_balance}),Object(j.jsx)(U.a,{align:"left",padding:"none"}),Object(j.jsx)(U.a,{align:"left",padding:"none"}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{paddingRight:"30px"},children:r.total_payable_amount})]})})}function Ae(e,t,n){return t[n]<e[n]?-1:t[n]>e[n]?1:0}function Fe(e,t){return"desc"===e?function(e,n){return Ae(e,n,t)}:function(e,n){return-Ae(e,n,t)}}function Le(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]})),n.map((function(e){return e[0]}))}var ze=Object(A.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function Te(e){e.title;var t=e.base_url,n=e.project_details,a=e.setProjectDetails,r=t+"plots/",l=ze(),o=Object(i.f)(),d=c.a.useState([]),u=Object(s.a)(d,2),b=u[0],p=u[1],m=c.a.useState([]),x=Object(s.a)(m,2),g=x[0],f=x[1],v=c.a.useState(!1),y=Object(s.a)(v,2),_=y[0],C=y[1],k=c.a.useState(-1),S=Object(s.a)(k,2),w=S[0],P=S[1],D=c.a.useState(-1),I=Object(s.a)(D,2),E=I[0],A=I[1],F=c.a.useState("asc"),L=Object(s.a)(F,2),z=L[0],T=L[1],R=c.a.useState("plot_no"),B=Object(s.a)(R,2),q=B[0],Z=B[1],ee=c.a.useState([]),ne=Object(s.a)(ee,2),ae=ne[0],ce=ne[1],le=c.a.useState(0),se=Object(s.a)(le,2),oe=se[0],ie=se[1],de=c.a.useState(!1),ue=Object(s.a)(de,2),je=ue[0],be=ue[1],pe=c.a.useState(0),me=Object(s.a)(pe,2),xe=me[0],Oe=me[1];c.a.useEffect((function(){p(Object(V.a)(Object.values(n.plots)))}),[n]),c.a.useEffect((function(){Oe(b.length)}),[b]);var he=function(e){return N.put(r+"".concat(e.id,"/"),e).then((function(e){console.log(e.data);var t=Object(h.a)({},n);return t.plots[e.data.id]=e.data,a(t),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},ge=function(e){return N.delete(r+"".concat(e.id,"/")).then((function(t){var c=Object(h.a)({},n);delete c.plots[e.id],a(c),console.log("Successfully Deleted! ",t)})).catch((function(e){return console.log(e.response),e.response&&e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},fe=xe-Math.min(xe,g.length-oe*xe),ve=function(e){o.push("/projects/".concat(e.project_id,"/plots/").concat(e.id))},ye={padding:"0px 0px 0px 12px"};return Object(j.jsxs)("div",{className:l.root,children:[Object(j.jsxs)(G.a,{className:l.paper,children:[Object(j.jsx)(Ne,{projectName:n.name,numSelected:ae.length,setCurrentlyCreating:C,deleteMultipleItems:function(){ae.forEach((function(e){ge({id:e})})),ce([])},totalPlots:n.total_plots,plots:b,rows:g,setRows:f}),Object(j.jsx)(K.a,{id:"plots-table",children:Object(j.jsxs)(W.a,{className:l.table,"aria-labelledby":"tableTitle",size:je?"small":"medium","aria-label":"enhanced table",children:[Object(j.jsx)(re,{classes:l,numSelected:ae.length,order:z,orderBy:q,onSelectAllClick:function(e){if(e.target.checked){var t=g.map((function(e){return e.id}));ce(t)}else ce([])},onRequestSort:function(e,t){T(q===t&&"asc"===z?"desc":"asc"),Z(t)},rowCount:g.length}),Object(j.jsxs)(Y.a,{children:[_&&Object(j.jsx)(De,{setCurrentlyCreating:C,saveItem:function(e){return n.total_plots===b.length?(alert("Number of Plots Limit Reached"),Promise.resolve(!1)):N.post(r,e).then((function(e){return console.log(e.data),a(Object(h.a)(Object(h.a)({},n),{},{plots:Object(h.a)(Object(h.a)({},n.plots),{},Object(O.a)({},e.data.id,e.data))})),!0})).catch((function(e){return console.log(e.response),e.response&&e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}),Le(g,Fe(z,q)).slice(oe*xe,oe*xe+xe).map((function(e,t){var n,a=(n=e.id,-1!==ae.indexOf(n)),c="enhanced-table-checkbox-".concat(t),r=e.id===w;return e.id===E?Object(j.jsx)(Pe,{obj:e,setDeleteIdx:A,deleteItem:ge},e.id):Object(j.jsxs)(J.a,{hover:!0,role:"checkbox","aria-checked":a,tabIndex:-1,selected:a,children:[Object(j.jsx)(U.a,{padding:"checkbox",children:Object(j.jsx)(H.a,{fontSize:"small",onClick:function(t){return function(e,t){var n=ae.indexOf(t),a=[];-1===n?a=a.concat(ae,t):0===n?a=a.concat(ae.slice(1)):n===ae.length-1?a=a.concat(ae.slice(0,-1)):n>0&&(a=a.concat(ae.slice(0,n),ae.slice(n+1))),ce(a)}(0,e.id)},checked:a,inputProps:{"aria-labelledby":c}})}),r?Object(j.jsx)(Ie,{title:"Plots",obj:e,setEditIdx:P,updateItem:he}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)(U.a,{align:"left",padding:"none",children:[Object(j.jsx)(te.a,{style:{cursor:"pointer",paddingRight:"5px"},onClick:function(){P(e.id)}}),Object(j.jsx)($.a,{style:{cursor:"pointer"},fontSize:"small",onClick:function(){A(e.id)}})]}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){var t;(t=e).deal&&o.push("/customers/".concat(t.deal.customer.id))},children:e.customer_name}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){var t;(t=e).deal&&o.push("/dealers/".concat(t.deal.dealer.id))},children:e.dealer_name}),Object(j.jsx)(U.a,{align:"left",component:"th",id:c,scope:"row",padding:"none",style:Object(h.a)({cursor:"pointer",fontWeight:"bold"},ye),onClick:function(){return ve(e)},children:e.plot_no}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.area}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.rate}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.plc})]}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.amount}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.total_commission_paid}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer"},onClick:function(){return ve(e)},children:e.total_rebate}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.total_interest_given}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.total_amount_received}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.balance}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.oldest_due_date?"".concat(e.oldest_due_date.getDate(),"-").concat(e.oldest_due_date.getMonth()+1,"-").concat(e.oldest_due_date.getFullYear()):null}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:Object(h.a)({cursor:"pointer"},ye),onClick:function(){return ve(e)},children:e.next_due_date?"".concat(e.next_due_date.getDate(),"-").concat(e.next_due_date.getMonth()+1,"-").concat(e.next_due_date.getFullYear()):null}),Object(j.jsx)(U.a,{align:"left",padding:"none",style:{cursor:"pointer",paddingRight:"30px"},onClick:function(){return ve(e)},children:e.next_payable_amount})]},e.id)})),Object(j.jsx)(Ee,{rows:g}),fe>0&&Object(j.jsx)(J.a,{style:{height:(je?33:43)*fe},children:Object(j.jsx)(U.a,{colSpan:17})})]})]})}),Object(j.jsx)(M.a,{rowsPerPageOptions:[0,b.length-1,b.length,b.length+1],component:"div",count:g.length,rowsPerPage:xe,page:oe,onChangePage:function(e,t){ie(t)},onChangeRowsPerPage:function(e){Oe(parseInt(e.target.value,10)),ie(0)}})]}),Object(j.jsx)(Q.a,{control:Object(j.jsx)(X.a,{checked:je,onChange:function(e){be(e.target.checked)}}),label:"Dense padding"})]})}function Re(e){var t=e.base_url+"projects/"+e.match.params.project_id+"/",n=Object(a.useState)({plots:{}}),r=Object(s.a)(n,2),l=r[0],o=r[1],i=Object(a.useState)({plots_sold:0,area_sold:0,plots_left:0,area_left:0}),d=Object(s.a)(i,2),u=d[0],b=d[1],p=Object(a.useState)(null),m=Object(s.a)(p,2),x=m[0],O=m[1],g=Object(a.useState)(!1),f=Object(s.a)(g,2),v=f[0],y=f[1];Object(a.useEffect)((function(){N.get(t).then((function(e){y(!0),o(e.data),console.log(e.data)})).catch((function(e){y(!0),O(e),console.log(e)}))}),[t]),c.a.useEffect((function(){var e=Object.values(l.plots),t={plots_sold:0,area_sold:0,plots_left:0,area_left:0};e.forEach((function(e){e.deal&&(t.plots_sold+=1,t.area_sold+=e.area)})),t.plots_left=l.total_plots-t.plots_sold,t.area_left=l.total_area-t.area_sold,b(t)}),[l]);var _=function(e,n,a){return N.put(t,a).then((function(e){console.log(e);var t=Object(h.a)({},l);return Object.keys(e.data).forEach((function(n){t[n]=e.data[n]})),o(t),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},C=function(e,t){};return Object(j.jsxs)("div",{className:"my-4 px-3",children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{paddingBottom:"10px"},children:Object(j.jsxs)("h1",{className:"d-inline",children:[" ",l.name," "]})}),Object(j.jsx)("div",{children:Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("th",{scope:"col",children:"Name"}),Object(j.jsx)("th",{scope:"col",children:"Address"}),Object(j.jsx)("th",{scope:"col",children:"No. of Plots"}),Object(j.jsx)("th",{scope:"col",children:"Total Area"}),Object(j.jsx)("th",{scope:"col",children:"Plots Sold"}),Object(j.jsx)("th",{scope:"col",children:"Area Sold"}),Object(j.jsx)("th",{scope:"col",children:"Plots Left"}),Object(j.jsx)("th",{scope:"col",children:"Area Left"}),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),Object(j.jsx)("tbody",{children:x?Object(j.jsx)("tr",{children:Object(j.jsxs)("td",{children:[" Error: ",x.message," "]})}):v?Object(j.jsx)(q,{title:"Projects",obj:Object(h.a)(Object(h.a)({},l),u),index:l.id,updateItem:_,deleteItem:C}):Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:" Loading... "})})})]})})]}),Object(j.jsx)(Te,{title:"Plots",base_url:t,project_details:l,setProjectDetails:o})]})}var Be=n(245),qe=n(238),Ve=n(239);function We(e){e.title;var t=e.base_url,n=e.project_id,r=e.plot_details,l=e.setPlotDetails,o=(e.index,t+"projects/".concat(n,"/plots/").concat(r.id,"/")),d=Object(a.useState)(!1),u=Object(s.a)(d,2),b=u[0],p=u[1],m=Object(a.useState)(!1),x=Object(s.a)(m,2),O=x[0],g=x[1],f=c.a.useRef(null),v=Object(i.f)(),y=Object(a.useState)(""),_=Object(s.a)(y,2),C=_[0],S=_[1],P=Object(a.useState)(""),D=Object(s.a)(P,2),I=D[0],E=D[1],A=Object(a.useState)(""),F=Object(s.a)(A,2),L=F[0],z=F[1],T=Object(a.useState)(""),R=Object(s.a)(T,2),B=R[0],q=R[1],V=Object(a.useState)(""),W=Object(s.a)(V,2),Y=W[0],U=W[1];Object(a.useEffect)((function(){S(r.plot_no),E(r.area),z(r.rate),U(r.amount),q(r.plc),b&&f.current&&f.current.focus()}),[r,b]);var K=function(){return N.delete(o).then((function(e){console.log("Successfully Deleted! ",e),v.push("/projects/".concat(n))})).catch((function(e){return console.log(e.response),e.response&&e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},M=function(){var e=function(){g(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Be.a,{open:O,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(qe.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(Ve.a,{children:[Object(j.jsx)(k.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(k.a,{onClick:K,color:"primary",children:"Yes"})]})]})})},J={display:"flex",alignItems:"center"};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(M,{}),Object(j.jsx)("div",{className:"card col-lg-5",style:{margin:"0px"},children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("form",{children:Object(j.jsxs)("div",{className:"row mb-3",style:{margin:"0px"},children:[Object(j.jsx)("div",{className:"col-sm-2",style:J,children:Object(j.jsx)(w.a,{inputRef:f,label:"PlotNo",InputProps:{readOnly:!b},margin:"dense",size:"small",color:"primary",variant:"standard",value:C||"",onChange:function(e){return S(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-2",style:J,children:Object(j.jsx)(w.a,{label:"Area",InputProps:{readOnly:!b},margin:"dense",size:"small",color:"primary",variant:"standard",value:I||"",onChange:function(e){return E(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-2",style:J,children:Object(j.jsx)(w.a,{label:"Rate",InputProps:{readOnly:!b},margin:"dense",size:"small",color:"primary",variant:"standard",value:L||"",onChange:function(e){return z(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-2",style:J,children:Object(j.jsx)(w.a,{label:"PLC",InputProps:{readOnly:!b},InputLabelProps:{shrink:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:B||"",onChange:function(e){return q(e.target.value)}})}),Object(j.jsxs)("div",{className:"col-sm-4",style:J,children:[Object(j.jsx)("div",{className:"col-sm-7",style:J,children:Object(j.jsx)(w.a,{label:"Amount",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:Y||"",onChange:function(e){return U(e.target.value)}})}),!1===b?Object(j.jsxs)("div",{className:"col-sm-5",style:Object(h.a)({},J),children:[Object(j.jsx)(ue.a,{onClick:function(e){e.preventDefault(),p(!0)},children:Object(j.jsx)(te.a,{})}),Object(j.jsx)(ue.a,{onClick:function(e){e.preventDefault(),g(!0)},children:Object(j.jsx)($.a,{})})]}):Object(j.jsxs)("div",{className:"col-sm-5",style:J,children:[Object(j.jsx)(ue.a,{onClick:function(e){(e.preventDefault(),C)?function(e){return N.put(o,e).then((function(e){console.log(e);var t=Object(h.a)({},r);return Object.keys(e.data).forEach((function(n){t[n]=e.data[n]})),l(t),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}({plot_no:C,area:I,rate:L,plc:B}).then((function(e){e&&p(!1)})):alert("Enter Plot No")},type:"submit",children:Object(j.jsx)(ke.a,{})}),Object(j.jsx)(ue.a,{onClick:function(e){e.preventDefault(),p(!1)},children:Object(j.jsx)(we.a,{})})]})]})]})})})})]})}var Ye=n(241);function Ue(e){e.title;var t=e.base_url,n=e.project_id,c=e.plot_details,r=e.setPlotDetails,l=e.setEditingView,o=(e.index,t+"projects/".concat(n,"/deals/")),i=t+"customers/",d=t+"dealers/",u={id:"",name:"",contact_no:"",other_info:""},b=Object(a.useState)(null),p=Object(s.a)(b,2),g=p[0],f=p[1],v=Object(a.useState)(null),y=Object(s.a)(v,2),_=y[0],C=y[1],k=Object(a.useState)(Object(h.a)({},u)),S=Object(s.a)(k,2),P=S[0],D=S[1],I=Object(a.useState)(Object(h.a)({},u)),E=Object(s.a)(I,2),A=E[0],F=E[1],L=Object(a.useState)([]),z=Object(s.a)(L,2),T=z[0],R=z[1],B=Object(a.useState)([]),q=Object(s.a)(B,2),W=q[0],Y=q[1];Object(a.useEffect)((function(){N.get(i).then((function(e){return console.log("All Customers fetched"),R(e.data),!0})).catch((function(e){return console.log(e),alert("Network Error"),!1})),N.get(d).then((function(e){return console.log("All Dealers fetched"),Y(e.data),!0})).catch((function(e){return console.log(e),alert("Network Error"),!1}))}),[i,d]),Object(a.useEffect)((function(){if(c.deal){var e=Object(h.a)({},c.deal.customer);f(e),D(Object(h.a)(Object(h.a)({},e),{},{contact_no:e.contact_no||""}));var t=Object(h.a)({},c.deal.dealer);C(t),F(Object(h.a)(Object(h.a)({},t),{},{contact_no:t.contact_no||""}))}}),[c.deal]);var U,K=function(e){return console.log("Dealer to be Saved: ",e),N.post(d,e).then((function(e){return console.log("Dealer Saved ",e),Y([].concat(Object(V.a)(W),[e.data])),e.data})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request! Customer Not Saved"),!1}))};if(c.deal){var M=t+"projects/".concat(n,"/deals/").concat(c.deal.id,"/");U=function(e){return N.put(M,e).then((function(e){console.log(e);var t=Object(h.a)({},c);return t.deal=e.data,r(t),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}else{U=function(e){return N.post(o,e).then((function(e){console.log(e);var t=Object(h.a)({},c);return t.deal=e.data,r(t),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}var J=function(){var e=Object(x.a)(m.a.mark((function e(t){var n,a,r,s,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==P.name.length){e.next=4;break}return alert("Enter Customer Name"),e.abrupt("return");case 4:if(0!==A.name.length){e.next=7;break}return alert("Enter Dealer Name"),e.abrupt("return");case 7:if(0===P.contact_no.length||10===P.contact_no.length){e.next=10;break}return alert("You can either leave Contact No blank or fill it with a 10-digit Number"),e.abrupt("return");case 10:if(0===A.contact_no.length||10===A.contact_no.length){e.next=13;break}return alert("You can either leave Contact No blank or fill it with a 10-digit Number"),e.abrupt("return");case 13:if(console.log(g,_),n=!1,a=!1,null!==g){e.next=24;break}if(!(P.contact_no&&T.find((function(e){return P.contact_no===e.contact_no})))){e.next=21;break}return alert("Customer With this Contact Number Already Exists. Please Select it from drop down!"),e.abrupt("return");case 21:n=!0,e.next=30;break;case 24:if(g.name!==P.name||g.contact_no!==P.contact_no&&(null!==g.contact_no||""!==P.contact_no)){e.next=28;break}n=!1,e.next=30;break;case 28:return alert("You cannot edit an existing customer's details. If you want to add a new customer, enter their details manually without selecting anything from the dropdown"),e.abrupt("return");case 30:if(null!==_){e.next=38;break}if(!(A.contact_no&&W.find((function(e){return A.contact_no===e.contact_no})))){e.next=35;break}return alert("Dealer With this Contact Number Already Exists! Please select it from the drop down!"),e.abrupt("return");case 35:a=!0,e.next=44;break;case 38:if(_.name!==A.name||_.contact_no!==A.contact_no&&(null!==_.contact_no||""!==A.contact_no)){e.next=42;break}a=!1,e.next=44;break;case 42:return alert("You cannot edit an existing dealer's details. If you want to add a new customer, enter their details manually without selecting anything from the dropdown"),e.abrupt("return");case 44:if(r={plot_id:c.id},console.log("Add Deal: == ",n,a),!n){e.next=54;break}return delete(s=Object(h.a)({},P)).id,console.log(s),e.next=52,(d=s,console.log("Customer to be Saved: ",d),N.post(i,d).then((function(e){return console.log("Customer Saved ",e),R([].concat(Object(V.a)(T),[e.data])),e.data})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request! Customer not saved!"),!1}))).then((function(e){r.customer_id=e.id}));case 52:e.next=55;break;case 54:r.customer_id=g.id;case 55:if(!a){e.next=63;break}return delete(o=Object(h.a)({},A)).id,console.log(A),e.next=61,K(o).then((function(e){r.dealer_id=e.id}));case 61:e.next=64;break;case 63:r.dealer_id=_.id;case 64:return console.log(r),e.next=67,U(r).then((function(e){e&&l(!1)}));case 67:case"end":return e.stop()}var d}),e)})));return function(t){return e.apply(this,arguments)}}(),G={display:"flex",alignItems:"center"},H=function(e,t,n,a,c,r,l){console.log("Change",t,n),"create-option"!==n&&l(t),console.log(c,r)},Q=function(e,t,n,a,c,r,l){console.log("some"),console.log("Input Change",e&&e.type,t,n),"clear"===n?l({id:"",name:"",contact_no:"",other_info:""}):(e&&"change"===e.type||!e&&t)&&l("reset"===n?Object(h.a)({},c):Object(h.a)(Object(h.a)({},r),{},Object(O.a)({},a,t))),console.log(c,r)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"card col-lg-7",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"card-text",children:Object(j.jsx)("form",{children:Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-3",style:G,children:Object(j.jsx)(Ye.a,{id:"customer_name",autoHighlight:!0,freeSolo:!0,fullWidth:!0,options:T.map((function(e){return e})),getOptionLabel:function(e){return e.name||""},value:g,onChange:function(e,t,n){H(0,t,n,0,g,P,f)},inputValue:P.name,onInputChange:function(e,t,n){Q(e,t,n,"name",g,P,D)},renderInput:function(e){return Object(j.jsx)(w.a,Object(h.a)(Object(h.a)({},e),{},{autoFocus:!0,label:"Customer Name",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})}),Object(j.jsx)("div",{className:"col-sm-2",style:G,children:Object(j.jsx)(Ye.a,{autoHighlight:!0,id:"customer_contact",freeSolo:!0,fullWidth:!0,options:T.filter((function(e){return e.contact_no})).map((function(e){return e})),getOptionLabel:function(e){return e.contact_no||""},value:g,onChange:function(e,t,n){H(0,t,n,0,g,P,f)},inputValue:P.contact_no||"",onInputChange:function(e,t,n){Q(e,t,n,"contact_no",g,P,D)},renderInput:function(e){return Object(j.jsx)(w.a,Object(h.a)(Object(h.a)({},e),{},{label:"CustomerNo",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})}),Object(j.jsx)("div",{className:"col-sm-3",style:G,children:Object(j.jsx)(Ye.a,{autoHighlight:!0,id:"dealer_name",freeSolo:!0,fullWidth:!0,options:W.map((function(e){return e})),getOptionLabel:function(e){return e.name||""},value:_,onChange:function(e,t,n){H(0,t,n,0,_,A,C)},inputValue:A.name,onInputChange:function(e,t,n){Q(e,t,n,"name",_,A,F)},renderInput:function(e){return Object(j.jsx)(w.a,Object(h.a)(Object(h.a)({},e),{},{label:"Dealer Name",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})}),Object(j.jsx)("div",{className:"col-sm-2",style:G,children:Object(j.jsx)(Ye.a,{id:"dealer_contact",closeIcon:null,freeSolo:!0,fullWidth:!0,options:W.filter((function(e){return e.contact_no})).map((function(e){return e})),getOptionLabel:function(e){return e.contact_no||""},value:_,onChange:function(e,t,n){H(0,t,n,0,_,A,C)},inputValue:A.contact_no||"",onInputChange:function(e,t,n){Q(e,t,n,"contact_no",_,A,F)},renderInput:function(e){return Object(j.jsx)(w.a,Object(h.a)(Object(h.a)({},e),{},{label:"DealerNo",margin:"dense",size:"small",color:"primary",variant:"standard"}))}})}),Object(j.jsxs)("div",{className:"col-sm-2",style:G,children:[Object(j.jsx)(ue.a,{onClick:J,type:"submit",children:Object(j.jsx)(ke.a,{})}),Object(j.jsx)(ue.a,{onClick:function(e){e.preventDefault(),l(!1)},children:Object(j.jsx)(we.a,{})})]})]})})})})})})}function Ke(e){e.title;var t=e.base_url,n=e.project_id,c=e.plot_details,r=e.setPlotDetails,l=(e.index,t+"projects/".concat(n,"/deals/").concat(c.deal.id,"/")),o=Object(i.f)(),d=Object(a.useState)(!1),u=Object(s.a)(d,2),b=u[0],p=u[1],m=Object(a.useState)(!1),x=Object(s.a)(m,2),O=x[0],g=x[1],f=function(e){return e.preventDefault(),N.delete(l).then((function(e){r(Object(h.a)(Object(h.a)({},c),{},{deal:null})),console.log("Successfully Deleted",e)})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},v=function(){var e=function(){g(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Be.a,{open:O,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(qe.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(Ve.a,{children:[Object(j.jsx)(k.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(k.a,{onClick:f,color:"primary",children:"Yes"})]})]})})},y={display:"flex",alignItems:"center"};return Object(j.jsxs)(j.Fragment,{children:[b?Object(j.jsx)(Ue,{title:"Deals",base_url:t,project_id:n,plot_details:c,setPlotDetails:r,index:c.id,setEditingView:p}):Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(v,{}),Object(j.jsx)("div",{className:"card col-lg-7",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"card-text",children:Object(j.jsx)("form",{children:Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-3",style:y,onClick:function(){o.push("/customers/".concat(c.deal.customer.id))},children:Object(j.jsx)(w.a,{label:"Customer Name",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.customer.name})}),Object(j.jsx)("div",{className:"col-sm-2",style:y,children:Object(j.jsx)(w.a,{label:"CustomerNo",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.customer.contact_no})}),Object(j.jsx)("div",{className:"col-sm-3",style:y,onClick:function(){o.push("/dealers/".concat(c.deal.dealer.id))},children:Object(j.jsx)(w.a,{label:"Dealer Name",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.dealer.name})}),Object(j.jsx)("div",{className:"col-sm-2",style:y,children:Object(j.jsx)(w.a,{label:"DealerNo",InputProps:{readOnly:!0},InputLabelProps:{shrink:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.dealer.contact_no})}),Object(j.jsxs)("div",{className:"col-sm-2",style:y,children:[Object(j.jsx)(ue.a,{onClick:function(e){e.preventDefault(),p(!0)},children:Object(j.jsx)(te.a,{})}),Object(j.jsx)(ue.a,{onClick:function(e){e.preventDefault(),g(!0)},children:Object(j.jsx)($.a,{})})]})]})})})})})]}),Object(j.jsx)("div",{className:"card col-lg-2 my-2",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("form",{children:[Object(j.jsx)("div",{className:"col-sm-12",style:y,children:Object(j.jsx)(w.a,{label:"Commission",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_commission_paid})}),Object(j.jsx)("div",{className:"col-sm-12",style:y,children:Object(j.jsx)(w.a,{label:"Rebate",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_rebate})}),Object(j.jsx)("div",{className:"col-sm-12",style:y,children:Object(j.jsx)(w.a,{label:"Interest Given",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_interest_given})}),Object(j.jsx)("div",{className:"col-sm-12",style:y,children:Object(j.jsx)(w.a,{label:"Amount Received",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.total_amount_paid})}),Object(j.jsx)("div",{className:"col-sm-12",style:y,children:Object(j.jsx)(w.a,{label:"Balance",InputProps:{readOnly:!0},margin:"dense",size:"small",color:"primary",variant:"standard",value:c.deal.balance})})]})})})})]})}function Me(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,l=e.plotAmount,o=Object(a.useState)(t.due_date),i=Object(s.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(""),p=Object(s.a)(b,2),m=p[0],x=p[1];Object(a.useEffect)((function(){u(t.due_date),x(t.payable_amount_percentage)}),[t]);var O=function(e){if(d)if(!m||m>100||m<0)alert("Enter Valid Payable Amount(%)");else{var a={due_date:d,payable_amount_percentage:m};r(t.id,n,a).then((function(e){e&&c(!1)}))}else alert("Enter Due Date")};return Object(j.jsxs)(J.a,{onKeyPress:function(e){"Enter"===e.key&&O()},children:[Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(w.a,{autoFocus:!0,size:"small",margin:"dense",type:"date",value:d,onChange:function(e){u(e.target.value)}})}),Object(j.jsx)(U.a,{style:{padding:"0px 0px 0px 10px"},children:Object(j.jsx)(w.a,{style:{maxWidth:"100px"},type:"number",size:"small",margin:"dense",value:m,onChange:function(e){x(e.target.value)},placeholder:"Payable Amount"})}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:parseInt(l*m/100)}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(ue.a,{style:{padding:"5px"},onClick:O,children:Object(j.jsx)(ke.a,{})})}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(ue.a,{style:{padding:"5px"},onClick:function(e){c(!1)},children:Object(j.jsx)(we.a,{})})})]})}function Je(e){var t=e.title,n=e.obj,c=(e.base_url,e.project_id,e.index),r=e.updateItem,l=(e.deleteIdx,e.setDeleteIdx),o=(e.deleteItem,e.plotAmount),i=Object(a.useState)(!1),d=Object(s.a)(i,2),u=d[0],b=d[1];return!0===u?Object(j.jsx)(Me,{title:t,obj:n,index:c,updateItem:r,setEditingView:b,plotAmount:o}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(J.a,{children:[Object(j.jsxs)(U.a,{style:{padding:"0px"},children:[" ",function(){var e=new Date(n.due_date);return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())}()," "]}),Object(j.jsxs)(U.a,{style:{padding:"0px 0px 0px 10px"},children:[" ",n.payable_amount_percentage+"%"," "]}),Object(j.jsxs)(U.a,{style:{padding:"0px"},children:[" ",n.payable_amount," "]}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(ue.a,{style:{padding:"5px"},onClick:function(){return b(!0)},children:Object(j.jsx)(te.a,{})})}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(ue.a,{style:{padding:"5px"},onClick:function(){return l(c)},children:Object(j.jsx)($.a,{})})})]})})}function Ge(e){e.title;var t=e.setCreateView,n=e.saveItem,c=e.plotAmount,r=Object(a.useState)((new Date).toISOString().substring(0,10)),l=Object(s.a)(r,2),o=l[0],i=l[1],d=Object(a.useState)(""),u=Object(s.a)(d,2),b=u[0],p=u[1],m=function(e){o?!b||b>100||b<0?alert("Enter Valid Payable Amount(%)"):n({due_date:o,payable_amount_percentage:b}).then((function(e){e&&(i((new Date).toISOString().substring(0,10)),p(""))})):alert("Enter Due Date")};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(J.a,{onKeyPress:function(e){"Enter"===e.key&&m()},children:[Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(w.a,{autoFocus:!0,size:"small",margin:"dense",type:"date",value:o,onChange:function(e){i(e.target.value)}})}),Object(j.jsx)(U.a,{style:{padding:"0px 0px 0px 10px"},children:Object(j.jsx)(w.a,{style:{maxWidth:"100px"},type:"number",size:"small",margin:"dense",value:b,onChange:function(e){p(e.target.value)},placeholder:"Payable Amount"})}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:parseInt(c*b/100)}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(ue.a,{style:{padding:"5px"},onClick:m,children:Object(j.jsx)(ke.a,{})})}),Object(j.jsx)(U.a,{style:{padding:"0px"},children:Object(j.jsx)(ue.a,{style:{padding:"5px"},onClick:function(e){t(!1)},children:Object(j.jsx)(we.a,{})})})]})})}function He(e){var t=e.obj,n=e.index,a=e.setDeleteIdx,c=e.deleteItem;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"text-center",colSpan:2,style:{fontWeight:"bold"},children:"Are you sure?"}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){c(t.id,n).then((function(){return a(-1)}))},className:"btn btn-sm btn-danger",children:" Yes\xa0 "})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){a(-1)},className:"btn btn-sm btn-primary",children:"\xa0No\xa0"})})]})})}var Qe=[{id:"due_date",label:"Due Date",style:{fontWeight:"bold",padding:"0px 0px 0px 0px",minWidth:"164px"}},{id:"payable_amount_percentage",label:"Payable Amount(%)",style:{fontWeight:"bold",padding:"0px 0px 0px 10px"}},{id:"payable_amount",label:"Payable Amount",style:{fontWeight:"bold",padding:"0px"}}];function Xe(e){var t=e.title,n=e.base_url,c=e.project_id,r=e.plot_details,l=e.setPlotDetails,o=(e.index,n+"projects/".concat(c,"/deals/").concat(r.deal.id,"/dues/")),i=Object(a.useState)(-1),d=Object(s.a)(i,2),u=d[0],b=d[1],p=Object(a.useState)(!1),m=Object(s.a)(p,2),x=m[0],O=m[1],g=function(e){return N.post(o,e).then((function(e){console.log(e.data);var t=Object(h.a)({},r);return t.deal.dues=e.data.deal.dues,l(t),!0})).catch((function(e){return console.log(e.response),e.response?alert(JSON.stringify(e.response.data)):alert("Some Error Occured while making request"),!1}))},f=function(e,t,n){return N.put(o+"".concat(e,"/"),n).then((function(e){console.log(e);var t=Object(h.a)({},r);return t.deal.dues=e.data.deal.dues,l(t),!0})).catch((function(e){return console.log(e.response),e.response?alert(JSON.stringify(e.response.data)):alert("Some Error Occured while making request"),!1}))},v=function(e,t){return N.delete(o+"".concat(e,"/")).then((function(e){console.log("Deleted Successfully",e);var t=Object(h.a)({},r);return t.deal.dues=e.data.deal.dues,l(t),!0})).catch((function(e){return console.log(e.response),e.response?alert(JSON.stringify(e.response.data)):alert("Some Error Occured while making request"),!1}))};return Object(j.jsx)("div",{className:"card col-lg-5 my-2 mx-2",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)(W.a,{className:"table",children:[Object(j.jsx)(ne.a,{children:Object(j.jsxs)(J.a,{children:[Qe.map((function(e){return Object(j.jsxs)(U.a,{component:"th",style:e.style,children:[" ",e.label," "]},e.id)})),Object(j.jsx)(U.a,{style:{padding:"0px"}}),Object(j.jsx)(U.a,{style:{padding:"0px"}})]})}),Object(j.jsxs)(Y.a,{children:[r.deal.dues&&r.deal.dues.map((function(e,l){return e?l===u?Object(j.jsx)(He,{obj:e,index:l,deleteItem:v,setDeleteIdx:b},e.id):Object(j.jsx)(Je,{index:l,project_id:c,title:t,obj:e,base_url:n,updateItem:f,setDeleteIdx:b,plotAmount:r.amount},e.id):Object(j.jsx)(a.Fragment,{},"deleted-"+l)})),!0===x&&Object(j.jsx)(Ge,{title:"Dues",setCreateView:O,saveItem:g,plotAmount:r.amount})]})]}),!1===x&&Object(j.jsxs)("button",{onClick:function(){O(!0)},style:{marginLeft:"10px"},className:"btn btn-sm btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})})})}function Ze(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,l=Object(a.useState)((new Date).toISOString().substring(0,10)),o=Object(s.a)(l,2),i=o[0],d=o[1],u=Object(a.useState)(0),b=Object(s.a)(u,2),p=b[0],m=b[1],x=Object(a.useState)(0),O=Object(s.a)(x,2),h=O[0],g=O[1],f=Object(a.useState)(0),v=Object(s.a)(f,2),y=v[0],_=v[1];Object(a.useEffect)((function(){d(t.date),m(t.interest_given),g(t.rebate),_(t.net_amount_paid)}),[t]);var N=function(e){if(i)if(""!==y){var a={date:i,interest_given:p||0,rebate:h||0,net_amount_paid:y};r(t.id,n,a).then((function(e){e&&c(!1)}))}else alert("Enter Net Amount Paid");else alert("Enter Date")};return Object(j.jsxs)("tr",{onKeyPress:function(e){"Enter"===e.key&&N()},children:[Object(j.jsx)("td",{children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:i,onChange:function(e){d(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:p,onChange:function(e){m(e.target.value)},placeholder:"Interest Given"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:h,onChange:function(e){g(e.target.value)},placeholder:"Rebate"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:y,onChange:function(e){_(e.target.value)},placeholder:"Net Amount Paid"})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:N,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){c(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})}function $e(e){var t=e.title,n=e.obj,c=(e.base_url,e.project_id,e.index),r=e.updateItem,l=e.setDeleteIdx,o=Object(a.useState)(!1),i=Object(s.a)(o,2),d=i[0],u=i[1];return!0===d?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(Ze,{title:t,obj:n,index:c,updateItem:r,setEditingView:u})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[" ",function(){var e=new Date(n.date);return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())}()," "]}),Object(j.jsxs)("td",{children:[" ",n.interest_given," "]}),Object(j.jsxs)("td",{children:[" ",n.rebate," "]}),Object(j.jsxs)("td",{children:[" ",n.net_amount_paid," "]}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){return u(!0)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return l(c)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})})]})})}function et(e){e.title;var t=e.setCreateView,n=e.saveItem,c=Object(a.useState)((new Date).toISOString().substring(0,10)),r=Object(s.a)(c,2),l=r[0],o=r[1],i=Object(a.useState)(""),d=Object(s.a)(i,2),u=d[0],b=d[1],p=Object(a.useState)(""),m=Object(s.a)(p,2),x=m[0],O=m[1],h=Object(a.useState)(""),g=Object(s.a)(h,2),f=g[0],v=g[1];return Object(j.jsx)("form",{onSubmit:function(e){(e.preventDefault(),l)?""!==f?n({date:l,interest_given:u||0,rebate:x||0,net_amount_paid:f}).then((function(e){e&&(o((new Date).toISOString().substring(0,10)),b(""),O(""),v(""))})):alert("Enter Net Amount Paid!"):alert("Enter Payment Date")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-sm-3",children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:l,onChange:function(e){o(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:u,onChange:function(e){b(e.target.value)},placeholder:"Interest Given"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:x,onChange:function(e){O(e.target.value)},placeholder:"Rebate"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:f,onChange:function(e){v(e.target.value)},placeholder:"Net Amount Paid"})}),Object(j.jsxs)("div",{className:"col-sm-3",style:{textAlign:"right"},children:[Object(j.jsx)("button",{style:{marginRight:"2px"},className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1)},style:{marginLeft:"2px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})}function tt(e){var t=e.obj,n=e.index,a=e.setDeleteIdx,c=e.deleteItem;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"text-center",colSpan:4,style:{fontWeight:"bold"},children:"Are you sure?"}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){c(t.id,n).then((function(e){return e&&a(-1)}))},className:"btn btn-sm btn-danger",children:" Yes\xa0 "})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){a(-1)},className:"btn btn-sm btn-primary",children:"\xa0No\xa0"})})]})})}function nt(e){var t=e.title,n=e.base_url,c=e.project_id,r=e.plot_details,l=e.setPlotDetails,o=(e.index,n+"projects/".concat(c,"/deals/").concat(r.deal.id,"/payments/")),i=["Date","Interest Given","Rebate","Net Amount Received"],d=Object(a.useState)(!1),u=Object(s.a)(d,2),b=u[0],p=u[1],m=Object(a.useState)(!1),x=Object(s.a)(m,2),O=x[0],g=x[1],f=function(e,t,n){return N.put(o+"".concat(e,"/"),n).then((function(e){console.log(e);var n=Object(h.a)({},r);return n.deal.total_rebate=e.data.deal.total_rebate,n.deal.total_interest_given=e.data.deal.total_interest_given,n.deal.total_amount_paid=e.data.deal.total_amount_paid,n.deal.balance=e.data.deal.balance,delete e.data.deal,n.deal.payments[t]=e.data,l(n),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},v=function(e,t){return N.delete(o+"".concat(e,"/")).then((function(e){console.log("Deleted Successfully",e);var n=Object(h.a)({},r);return n.deal.total_rebate=e.data.deal.total_rebate,n.deal.total_interest_given=e.data.deal.total_interest_given,n.deal.total_amount_paid=e.data.deal.total_amount_paid,n.deal.balance=e.data.deal.balance,n.deal.payments[t]=null,l(n),!0})).catch((function(e){return console.log(e.response),e.response&&e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))};return Object(j.jsx)("div",{className:"card col-xl-9",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[i.map((function(e){return Object(j.jsxs)("th",{scope:"col",children:[" ",e," "]},e)})),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),Object(j.jsx)("tbody",{children:r.deal.payments&&r.deal.payments.map((function(e,r){return e?r===O?Object(j.jsx)(tt,{obj:e,index:r,setDeleteIdx:g,deleteItem:v},e.id):Object(j.jsx)($e,{index:r,project_id:c,title:t,obj:e,base_url:n,updateItem:f,setDeleteIdx:g},e.id):Object(j.jsx)(a.Fragment,{},"deleted-"+r)}))})]}),!0===b&&Object(j.jsx)(et,{title:"Payments",setCreateView:p,saveItem:function(e){return N.post(o,e).then((function(e){console.log(e.data);var t=Object(h.a)({},r);return t.deal.total_rebate=e.data.deal.total_rebate,t.deal.total_interest_given=e.data.deal.total_interest_given,t.deal.total_amount_paid=e.data.deal.total_amount_paid,t.deal.balance=e.data.deal.balance,delete e.data.deal,t.deal.payments.push(e.data),l(t),!0})).catch((function(e){return alert("Network Error! Try Again"),console.log(e),!1}))}}),!1===b&&Object(j.jsxs)("button",{onClick:function(){p(!0)},style:{marginLeft:"10px"},className:"btn btn-sm btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})})})}function at(e){e.title;var t=e.obj,n=e.index,c=e.setEditingView,r=e.updateItem,l=Object(a.useState)((new Date).toISOString().substring(0,10)),o=Object(s.a)(l,2),i=o[0],d=o[1],u=Object(a.useState)(""),b=Object(s.a)(u,2),p=b[0],m=b[1];Object(a.useEffect)((function(){d(t.date),m(t.amount)}),[t]);var x=function(e){if(e.preventDefault(),i)if(""!==p){var a={date:i,amount:p};r(t.id,n,a).then((function(e){e&&c(!1)}))}else alert("Enter Amount");else alert("Enter Commission Date")};return Object(j.jsxs)("tr",{onKeyPress:function(e){"Enter"===e.key&&x()},children:[Object(j.jsx)("td",{children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:i,onChange:function(e){d(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("td",{children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:p,onChange:function(e){m(e.target.value)},placeholder:"Amount"})}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:x,style:{margin:"0px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(e){c(!1)},style:{margin:"0px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})}function ct(e){var t=e.title,n=e.obj,c=(e.base_url,e.project_id,e.index),r=e.updateItem,l=e.setDeleteIdx,o=Object(a.useState)(!1),i=Object(s.a)(o,2),d=i[0],u=i[1];return!0===d?Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(at,{title:t,obj:n,index:c,updateItem:r,setEditingView:u})}):Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsxs)("td",{children:[" ",function(){var e=new Date(n.date);return"".concat(e.getDate(),"-").concat(e.getMonth()+1,"-").concat(e.getFullYear())}()," "]}),Object(j.jsxs)("td",{children:[" ",n.amount," "]}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){return u(!0)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){return l(c)},style:{margin:"0px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})})]})})}function rt(e){e.title;var t=e.setCreateView,n=e.saveItem,c=Object(a.useState)((new Date).toISOString().substring(0,10)),r=Object(s.a)(c,2),l=r[0],o=r[1],i=Object(a.useState)(""),d=Object(s.a)(i,2),u=d[0],b=d[1];return Object(j.jsx)("form",{onSubmit:function(e){(e.preventDefault(),l)?""!==u?n({date:l,amount:u}).then((function(e){e&&(o((new Date).toISOString().substring(0,10)),b(""))})):alert("Enter Amount"):alert("Enter Commission Date")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("input",{autoFocus:!0,style:{paddingTop:"3px",paddingBottom:"3px"},type:"date",className:"form-control",value:l,onChange:function(e){o(e.target.value)},placeholder:"Date"})}),Object(j.jsx)("div",{className:"col-sm-4",children:Object(j.jsx)("input",{style:{paddingTop:"3px",paddingBottom:"3px"},type:"number",className:"form-control",value:u,onChange:function(e){b(e.target.value)},placeholder:"Amount"})}),Object(j.jsx)("div",{className:"col-sm-2",style:{textAlign:"right"},children:Object(j.jsx)("button",{style:{marginRight:"2px"},className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("div",{className:"col-sm-2",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1)},style:{marginLeft:"2px"},className:"btn btn-sm btn-danger",children:"Cancel"})})]})})}function lt(e){var t=e.obj,n=e.index,a=e.setDeleteIdx,c=e.deleteItem;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("tr",{children:[Object(j.jsx)("td",{className:"text-center",colSpan:2,style:{fontWeight:"bold"},children:"Are you sure?"}),Object(j.jsx)("td",{className:"text-center",children:Object(j.jsx)("button",{onClick:function(){c(t.id,n).then((function(e){return e&&a(-1)}))},className:"btn btn-sm btn-danger",children:" Yes\xa0 "})}),Object(j.jsx)("td",{children:Object(j.jsx)("button",{onClick:function(){a(-1)},className:"btn btn-sm btn-primary",children:"\xa0No\xa0"})})]})})}function st(e){var t=e.title,n=e.base_url,c=e.project_id,r=e.plot_details,l=e.setPlotDetails,o=(e.index,n+"projects/".concat(c,"/deals/").concat(r.deal.id,"/commissions/")),i=["Date","Amount"],d=Object(a.useState)(!1),u=Object(s.a)(d,2),b=u[0],p=u[1],O=Object(a.useState)(-1),g=Object(s.a)(O,2),f=g[0],v=g[1],y=function(e,t,n){return N.put(o+"".concat(e,"/"),n).then((function(e){console.log(e);var n=Object(h.a)({},r);return n.deal.total_commission_paid=e.data.deal.total_commission_paid,delete e.data.deal,n.deal.commission_payments[t]=e.data,l(n),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},_=function(e,t){return N.delete(o+"".concat(e,"/")).then(function(){var e=Object(x.a)(m.a.mark((function e(n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Deleted Successfully",n),(a=Object(h.a)({},r)).deal.total_commission_paid=n.data.deal.total_commission_paid,delete n.data.deal,a.deal.commission_payments[t]=null,e.next=7,l(a);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))};return Object(j.jsx)("div",{className:"card col-xl-4 my-2",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("div",{className:"card-text",children:[Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[i.map((function(e){return Object(j.jsxs)("th",{scope:"col",children:[" ",e," "]},e)})),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),Object(j.jsx)("tbody",{children:r.deal.commission_payments&&r.deal.commission_payments.map((function(e,r){return e?r===f?Object(j.jsx)(lt,{obj:e,index:r,setDeleteIdx:v,deleteItem:_},e.id):Object(j.jsx)(ct,{index:r,project_id:c,title:t,obj:e,base_url:n,updateItem:y,setDeleteIdx:v},e.id):Object(j.jsx)(a.Fragment,{},"deleted-"+r)}))})]}),!0===b&&Object(j.jsx)(rt,{title:"Commission Payments",setCreateView:p,saveItem:function(e){return N.post(o,e).then((function(e){console.log(e.data);var t=Object(h.a)({},r);return t.deal.total_commission_paid=e.data.deal.total_commission_paid,delete e.data.deal,t.deal.commission_payments.push(e.data),l(t),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))}}),!1===b&&Object(j.jsxs)("button",{onClick:function(){p(!0)},style:{marginLeft:"10px"},className:"btn btn-sm btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})})})}function ot(e){var t=e.base_url,n=e.match,c=n.params.project_id,r=n.params.plot_id,l=t+"projects/"+c+"/plots/"+r,o=Object(a.useState)({deal:null}),i=Object(s.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(!1),p=Object(s.a)(b,2),m=p[0],x=p[1],O=Object(a.useState)(null),h=Object(s.a)(O,2),g=h[0],f=h[1],v=Object(a.useState)(!1),y=Object(s.a)(v,2),_=y[0],C=y[1];Object(a.useEffect)((function(){N.get(l).then((function(e){C(!0),u(e.data),console.log(e)})).catch((function(e){C(!0),f(e),console.log(e)}))}),[l]);return Object(j.jsx)("div",{className:"my-4 px-3",children:Object(j.jsx)("div",{children:g?Object(j.jsxs)(j.Fragment,{children:[" Error: ",g.message," "]}):_?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)(We,{title:"Plots",base_url:t,project_id:c,plot_details:d,setPlotDetails:u,index:d.id}),d.deal?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Ke,{title:"Deals",base_url:t,project_id:c,plot_details:d,setPlotDetails:u,index:d.deal.id}),Object(j.jsx)(Xe,{title:"Dues",base_url:t,project_id:c,plot_details:d,setPlotDetails:u,index:d.deal.id}),Object(j.jsx)(st,{title:"Commission Payments",base_url:t,project_id:c,plot_details:d,setPlotDetails:u,index:d.deal.id}),Object(j.jsx)(nt,{title:"Payments",base_url:t,project_id:c,plot_details:d,setPlotDetails:u,index:d.deal.id})]}):Object(j.jsx)(j.Fragment,{}),!d.deal&&m?Object(j.jsx)(Ue,{title:"Deals",base_url:t,project_id:c,plot_details:d,setPlotDetails:u,index:d.id,setEditingView:x,setDealCreated:""}):Object(j.jsx)(j.Fragment,{}),d.deal||m?Object(j.jsx)(j.Fragment,{}):Object(j.jsx)("div",{className:"col-lg-7",children:Object(j.jsx)("button",{onClick:function(){x(!0)},type:"button",className:"btn btn-primary m-3",children:"Add Deal"})})]})}):Object(j.jsx)(j.Fragment,{children:" Loading... "})})})}var it=n(117);function dt(e){e.title;var t=e.setCreateView,n=e.saveItem,r=Object(a.useState)(""),l=Object(s.a)(r,2),o=l[0],i=l[1],d=Object(a.useState)(""),u=Object(s.a)(d,2),b=u[0],p=u[1],m=Object(a.useState)(""),x=Object(s.a)(m,2),O=x[0],h=x[1],g=Object(a.useState)(""),f=Object(s.a)(g,2),v=f[0],y=f[1],_=c.a.useRef(null);c.a.useEffect((function(){_.current&&_.current.focus()}),[]);return Object(j.jsx)("form",{onSubmit:function(e){(e.preventDefault(),o)?n({name:o,address:b,total_plots:O,total_area:v}).then((function(e){e&&(i(""),p(""),h(""),y(""),_.current.focus())})):alert("Enter Project Name")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{ref:_,type:"text",className:"form-control",value:o,onChange:function(e){i(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:b,onChange:function(e){p(e.target.value)},placeholder:"Address"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:O,onChange:function(e){h(e.target.value)},placeholder:"No. of Plots"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:v,onChange:function(e){y(e.target.value)},placeholder:"Total Area"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{type:"submit",style:{marginLeft:"80px"},className:"btn btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),t(!1)},style:{marginRight:"50px"},className:"btn btn-danger",children:"Cancel"})})]})})}function ut(e){var t=e.title,n=e.setCreateView,c=e.saveItem,r=Object(a.useState)(""),l=Object(s.a)(r,2),o=l[0],i=l[1],d=Object(a.useState)(""),u=Object(s.a)(d,2),b=u[0],p=u[1],m=Object(a.useState)(""),x=Object(s.a)(m,2),O=x[0],h=x[1];return Object(j.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),o)if(b&&10!==b.length)alert("Enter 10 digit Contact No or Nothing at all");else{var n={name:o,contact_no:b,other_info:O};b||(n.contact_no=null),c(n).then((function(e){e&&(i(""),p(""),h(""))}))}else alert("Enter "+t.substring(0,t.length-1)+" Name")},children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{autoFocus:!0,type:"text",className:"form-control",value:o,onChange:function(e){i(e.target.value)},placeholder:"Name"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:b,onChange:function(e){p(e.target.value)},placeholder:"Contact Number"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{type:"text",className:"form-control",value:O,onChange:function(e){h(e.target.value)},placeholder:"Other Info"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{type:"submit",style:{marginLeft:"80px"},className:"btn btn-primary",children:"\xa0Save\xa0\xa0"})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),n(!1)},style:{marginRight:"50px"},className:"btn btn-danger",children:"Cancel"})})]})})}var jt=["title","base_url"];function bt(e){var t=e.title,n=e.base_url,r=(Object(it.a)(e,jt),{Projects:n+"projects/",Dealers:n+"dealers/",Customers:n+"customers/"}),l={Projects:["Name","Address","Total Plots","Total Area","Plots Sold","Area Sold","Plots Left","Area Left"],Dealers:["Name","Contact No","Other Info"],Customers:["Name","Contact No","Other Info"]},o=Object(a.useState)(!1),i=Object(s.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(!1),p=Object(s.a)(b,2),m=p[0],x=p[1],O=Object(a.useState)(null),h=Object(s.a)(O,2),g=h[0],f=h[1],v=Object(a.useState)(!1),y=Object(s.a)(v,2),_=y[0],C=y[1],S=Object(a.useState)([]),w=Object(s.a)(S,2),P=w[0],D=w[1];Object(a.useEffect)((function(){N.get(n+t.toLowerCase()+"/").then((function(e){console.log(e),C(!0),D(Object(V.a)(e.data))})).catch((function(e){return console.log("Network Error! ",e.response),f(e.response.data.detail),C(!1),!1}))}),[n,t]);var I=function(e){return N.post(r[t],e).then((function(e){return console.log(e),D([].concat(Object(V.a)(P),[e.data])),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},E=function(e,n,a){return N.put(r[t]+"".concat(e,"/"),a).then((function(e){console.log(e.data);var t=Object(V.a)(P);return t[n]=e.data,D(t),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},A=function(e,n){N.delete(r[t]+"".concat(n.id,"/")).then((function(t){console.log(t);var n=Object(V.a)(P);n[e]=null,D(n)})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},F=function(){var e=function(){x(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Be.a,{open:m,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(qe.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(Ve.a,{children:[Object(j.jsx)(k.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(k.a,{onClick:A,color:"primary",children:"Yes"})]})]})})};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(F,{}),Object(j.jsxs)("div",{className:"my-4 px-3",children:[Object(j.jsx)("div",{style:{paddingBottom:"10px",paddingLeft:"10px"},children:Object(j.jsxs)("h1",{children:[" ",t," "]})}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("table",{className:"table",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{children:[l[t].map((function(e){return Object(j.jsxs)("th",{scope:"col",children:[" ",e," "]},e)})),Object(j.jsx)("th",{scope:"col"}),Object(j.jsx)("th",{scope:"col"})]})}),g?Object(j.jsx)("tbody",{children:Object(j.jsx)("tr",{children:Object(j.jsxs)("td",{children:[" Error: ",g," "]})})}):_?Object(j.jsx)("tbody",{children:P.map((function(e,n){return e?Object(j.jsx)(q,{title:t,obj:e,index:n,updateItem:E,deleteItem:A},e.id):Object(j.jsx)(c.a.Fragment,{},"deleted - "+n)}))}):Object(j.jsx)("tbody",{children:Object(j.jsx)("tr",{children:Object(j.jsx)("td",{children:" Loading... "})})})]}),!0===d&&function(e){return"Projects"===e?Object(j.jsx)(dt,{title:e,setCreateView:u,saveItem:I}):Object(j.jsx)(ut,{title:e,setCreateView:u,saveItem:I})}(t),!1===d&&Object(j.jsxs)("button",{onClick:function(){u(!0)},style:{marginLeft:"10px"},className:"btn btn-primary",children:["Add ",t.substring(0,t.length-1)," "]})]})]})]})}function pt(e){e.title;var t=e.base_url,n=Object(i.g)(),c=Object(i.f)(),r=t+"customers/"+n.customer_id+"/",l=Object(a.useState)({name:"",contact_no:"",other_info:""}),o=Object(s.a)(l,2),d=o[0],u=o[1],b=Object(a.useState)(""),p=Object(s.a)(b,2),m=p[0],x=p[1],O=Object(a.useState)(""),h=Object(s.a)(O,2),g=h[0],f=h[1],v=Object(a.useState)(""),y=Object(s.a)(v,2),_=y[0],C=y[1],S=Object(a.useState)(!1),P=Object(s.a)(S,2),D=P[0],I=P[1],E=Object(a.useState)(!1),A=Object(s.a)(E,2),F=A[0],L=A[1];Object(a.useEffect)((function(){N.get(r).then((function(e){u(e.data)})).catch((function(e){console.log(e),alert("Network Error")}))}),[r]),Object(a.useEffect)((function(){x(d.name),f(d.contact_no),C(d.other_info)}),[d,D]);var z=function(){return N.delete(r).then((function(e){return console.log("Deleted Successfully",e),c.goBack(),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},T=function(){var e=function(){L(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Be.a,{open:F,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(qe.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(Ve.a,{children:[Object(j.jsx)(k.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(k.a,{onClick:z,color:"primary",children:"Yes"})]})]})})},R={display:"flex",alignItems:"center"};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{}),Object(j.jsx)("div",{className:"card m-4",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-4",style:R,children:Object(j.jsx)(w.a,{label:"Name",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:m||"",onChange:function(e){return x(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:R,children:Object(j.jsx)(w.a,{label:"Contact No",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:g||"",onChange:function(e){return f(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:R,children:Object(j.jsx)(w.a,{label:"Other Info",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:_||"",onChange:function(e){return C(e.target.value)}})})]}),!1===D?Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),I(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"}),Object(j.jsx)("button",{onClick:function(){return L(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})]}):Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){var t;(e.preventDefault(),m)?g&&10!==g.length?alert("Enter Contact No of Length 10 or dont enter anything"):(t={name:m,contact_no:g||null,other_info:_},N.put(r,t).then((function(e){return console.log(e),u(e.data),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))).then((function(e){e&&I(!1)})):alert("Enter Name")},style:{margin:"5px 5px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),I(!1)},style:{margin:"5px 5px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})})})]})}function mt(e){e.title;var t=e.base_url,n=Object(i.g)(),c=Object(i.f)(),r=t+"dealers/"+n.dealer_id+"/",l=Object(a.useState)({name:"",contact_no:"",other_info:""}),o=Object(s.a)(l,2),d=o[0],u=o[1],b=Object(a.useState)(""),p=Object(s.a)(b,2),m=p[0],x=p[1],O=Object(a.useState)(""),h=Object(s.a)(O,2),g=h[0],f=h[1],v=Object(a.useState)(""),y=Object(s.a)(v,2),_=y[0],C=y[1],S=Object(a.useState)(!1),P=Object(s.a)(S,2),D=P[0],I=P[1],E=Object(a.useState)(!1),A=Object(s.a)(E,2),F=A[0],L=A[1];Object(a.useEffect)((function(){N.get(r).then((function(e){u(e.data)})).catch((function(e){console.log(e),alert("Network Error")}))}),[r]),Object(a.useEffect)((function(){x(d.name),f(d.contact_no),C(d.other_info)}),[d,D]);var z=function(){return N.delete(r).then((function(e){return console.log("Deleted Successfully",e),c.goBack(),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))},T=function(){var e=function(){L(!1)};return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(Be.a,{open:F,onClose:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(j.jsx)(qe.a,{id:"alert-dialog-title",children:"Are you sure?"}),Object(j.jsxs)(Ve.a,{children:[Object(j.jsx)(k.a,{onClick:e,color:"primary",autoFocus:!0,children:"No"}),Object(j.jsx)(k.a,{onClick:z,color:"primary",children:"Yes"})]})]})})},R={display:"flex",alignItems:"center"};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(T,{}),Object(j.jsx)("div",{className:"card m-4",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsx)("div",{className:"card-text",children:Object(j.jsxs)("form",{children:[Object(j.jsxs)("div",{className:"row mb-3",children:[Object(j.jsx)("div",{className:"col-sm-4",style:R,children:Object(j.jsx)(w.a,{label:"Name",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:m||"",onChange:function(e){return x(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:R,children:Object(j.jsx)(w.a,{label:"Contact No",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:g||"",onChange:function(e){return f(e.target.value)}})}),Object(j.jsx)("div",{className:"col-sm-4",style:R,children:Object(j.jsx)(w.a,{label:"Other Info",InputProps:{readOnly:!D},margin:"dense",size:"small",color:"primary",variant:"standard",value:_||"",onChange:function(e){return C(e.target.value)}})})]}),!1===D?Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),I(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-secondary",children:"Edit"}),Object(j.jsx)("button",{onClick:function(){return L(!0)},style:{margin:"5px 5px"},type:"button",className:"btn btn-sm btn-danger",children:"Delete"})]}):Object(j.jsxs)("div",{style:{textAlign:"right"},children:[Object(j.jsx)("button",{onClick:function(e){var t;(e.preventDefault(),m)?g&&10!==g.length?alert("Enter Contact No of Length 10 or dont enter anything"):(t={name:m,contact_no:g||null,other_info:_},N.put(r,t).then((function(e){return console.log(e),u(e.data),!0})).catch((function(e){return console.log(e.response),e.response&&"Authentication credentials were not provided."===e.response.data.detail?alert("Please Login First!"):alert("Some Error Occured while making request"),!1}))).then((function(e){e&&I(!1)})):alert("Enter Name")},style:{margin:"5px 5px"},type:"submit",className:"btn btn-sm btn-primary",children:"\xa0Save\xa0\xa0"}),Object(j.jsx)("button",{onClick:function(e){e.preventDefault(),I(!1)},style:{margin:"5px 5px"},className:"btn btn-sm btn-danger",children:"Cancel"})]})]})})})})]})}var xt="http://localhost:8000/realestate/";var Ot=function(){var e=c.a.useState({sold:!1,unsold:!1,pending:!1,apply_dates:!1,start_date:(new Date).toISOString().substring(0,10),end_date:new Date((new Date).setMonth((new Date).getMonth()+1)).toISOString().substring(0,10)}),t=Object(s.a)(e,2),n=t[0],a=t[1],r=c.a.useState((function(){var e=localStorage.getItem("refresh_token");return!!e&&(1e3*JSON.parse(atob(e.split(".")[1])).exp>(new Date).getTime()?(console.log("Refresh Token Valid! Logged in"),!0):(console.log("Refresh Token Not Valid! Logged Out"),!1))})),l=Object(s.a)(r,2),p=l[0],m=l[1];return Object(j.jsx)("div",{children:Object(j.jsxs)(o.a,{children:[Object(j.jsx)(u.Provider,{value:{user:p,setUser:m},children:Object(j.jsx)(b,{title:"Rudra Estate",base_url:xt})}),Object(j.jsxs)(i.c,{children:[Object(j.jsx)(i.a,{exact:!0,path:"/",render:function(){return Object(j.jsx)(bt,{title:"Projects",base_url:xt},"Projects")}}),Object(j.jsx)(i.a,{exact:!0,path:"/projects",render:function(){return Object(j.jsx)(bt,{title:"Projects",base_url:xt},"Projects")}}),Object(j.jsx)(i.a,{exact:!0,path:"/dealers",render:function(){return Object(j.jsx)(bt,{title:"Dealers",base_url:xt},"Dealers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/customers",render:function(){return Object(j.jsx)(bt,{title:"Customers",base_url:xt},"Customers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/dealers/:dealer_id",render:function(){return Object(j.jsx)(mt,{title:"Dealers",base_url:xt},"Dealers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/customers/:customer_id",render:function(){return Object(j.jsx)(pt,{title:"Customers",base_url:xt},"Customers")}}),Object(j.jsx)(i.a,{exact:!0,path:"/projects/:project_id/plots/:plot_id",render:function(e){return Object(j.jsx)(ot,{base_url:xt,match:e.match})}}),Object(j.jsx)(d.Provider,{value:{filters:n,setFilters:a},children:Object(j.jsx)(i.a,{exact:!0,path:"/projects/:project_id",render:function(e){return Object(j.jsx)(Re,{base_url:xt,match:e.match})}})})]}),Object(j.jsx)(i.c,{children:Object(j.jsxs)(u.Provider,{value:{user:p,setUser:m},children:[Object(j.jsx)(i.a,{exact:!0,path:"/login",render:function(){return Object(j.jsx)(z,{title:"Login",base_url:xt},"Login")}}),Object(j.jsx)(i.a,{exact:!0,path:"/logout",render:function(){return Object(j.jsx)(T,{title:"Logout",base_url:xt},"Logout")}})]})})]})})},ht=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),a(e),c(e),r(e),l(e)}))};l.a.render(Object(j.jsx)(Ot,{}),document.getElementById("root")),ht()}},[[172,1,2]]]);